{"ast":null,"code":"import _classCallCheck from\"/Users/john/Downloads/library2/lib/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/john/Downloads/library2/lib/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/john/Downloads/library2/lib/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/john/Downloads/library2/lib/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/john/Downloads/library2/lib/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import Card from'react-bootstrap/Card';import ListGroup from'react-bootstrap/ListGroup';import Nav from'react-bootstrap/Nav';import'./Profile.css';import firebase,{auth,provider}from'../../firebase.js';import*as login from'../Auth/Login';import{withRouter}from'react-router-dom';var db=firebase.firestore();var ProfileSettings=/*#__PURE__*/function(_React$Component){_inherits(ProfileSettings,_React$Component);function ProfileSettings(props){var _this;_classCallCheck(this,ProfileSettings);_this=_possibleConstructorReturn(this,_getPrototypeOf(ProfileSettings).call(this,props));_this.handleNewImage=function(e){console.log(e+e.target.value);_this.setState({image:e.target.value});var addPic=db.collection('Users').doc(login.getUID()).collection('Photos').doc('Avatar').set({ava:e.target.value}).then(function(){console.log(\"Document successfully written!\");}).catch(function(error){console.error(\"Error writing document: \",error);});};_this.handleScale=function(e){var scale=parseFloat(e.target.value);_this.setState({scale:scale});};_this.handlePositionChange=function(position){_this.setState({position:position});};_this.logOutUser=function(){var tempname=login.getUser();firebase.auth().signOut().then(function(){alert(\"Goodbye \"+tempname+\"!\");_this.props.history.push('/');window.location.reload();}).catch(function(error){alert(error.message);});};_this.changePassword=function(currentPassword,newPassword){_this.reauthenticate(currentPassword).then(function(){var user=login.getUser();user.updatePassword(newPassword).then(function(){console.log(\"Password updated!\");}).catch(function(error){console.log(error);});}).catch(function(error){console.log(error);});};_this.reauthenticate=function(currentPassword){var user=firebase.auth().currentUser;var cred=firebase.auth.EmailAuthProvider.credential(user.email,currentPassword);return user.reauthenticateWithCredential(cred);};_this.changeUsername=function(newName){var db=firebase.firestore();var user=firebase.auth().currentUser;var name='';db.collection(\"Users\").doc(login.getUID()).update({name:newName});console.log(\"updated?\");};_this.state={user:false,fullnamed:_this.getName2()};return _this;}_createClass(ProfileSettings,[{key:\"getName2\",value:function getName2(){var _this2=this;var db=firebase.firestore();var user=firebase.auth().currentUser;var name='';db.collection(\"Users\").get().then(function(querySnapshot){var data=querySnapshot.docs.map(function(doc){return doc.data();});console.log(data);if(user!==null){console.log(data+\" \"+user.displayName+\" \"+data[1].name);for(var i in data){if(user.displayName===data[i].name){console.log(\"yuh\"+data[i].fullname);name=data[i].fullname;_this2.setState({fullnamed:name});return name;}}}});return name;}},{key:\"navClicked\",value:function navClicked(name){var _this3=this;if(name===\"\"||name===\"profile\"){return React.createElement(\"div\",null,React.createElement(\"h4\",{style:{marginTop:\"20px\"}},\" Profile Info \"),React.createElement(ListGroup.Item,null,React.createElement(\"p\",{style:{fontWeight:'bold'}},\"Username\"),login.getUser()),React.createElement(ListGroup.Item,null,React.createElement(\"p\",{style:{fontWeight:'bold'}},\"Full Name\"),this.state.fullnamed),React.createElement(ListGroup.Item,null,React.createElement(\"p\",{style:{fontWeight:'bold'}},\"Email\"),login.getEmail()),React.createElement(ListGroup.Item,null,React.createElement(\"p\",{style:{fontWeight:'bold'}},\"Account Created\"),login.getCreated()),React.createElement(ListGroup.Item,null,\" New Avatar Image URL  \",React.createElement(\"input\",{name:\"newImage\",placeholder:\"https://example.com\",type:\"url\",onChange:this.handleNewImage})));}else if(name===\"settings\"){return React.createElement(\"div\",null,React.createElement(\"h4\",{style:{marginTop:\"20px\"}},\"Settings\"),React.createElement(ListGroup.Item,null,React.createElement(\"p\",null,\" Password: *********   \"),\" \",React.createElement(\"button\",{className:\"btn btn-info\",onClick:function onClick(){return _this3.changePassword();}},\"Change Password\")),React.createElement(ListGroup.Item,null,React.createElement(\"p\",null,\" Username: \",login.getUser(),\"    \"),React.createElement(\"form\",null,React.createElement(\"label\",null,\"Name:\",React.createElement(\"input\",{type:\"text\",name:\"name\",value:this.state.value})),React.createElement(\"input\",{type:\"submit\",value:\"Submit\",onClick:function onClick(){return _this3.changeUsername(_this3.state.value);}})),React.createElement(\"button\",{className:\"btn btn-info\",onClick:function onClick(){return _this3.changeUsername(_this3.state.value);}},\"Change Username\"),\" \"));}else if(name===\"signout\"){return React.createElement(\"div\",null,React.createElement(\"h4\",{style:{marginTop:\"20px\"}},\"Sign Out\"),React.createElement(\"button\",{className:\"btn btn-danger\",style:{marginTop:\"60px\"},onClick:function onClick(){return _this3.logOutUser();}},\"Sign Out\"));}}},{key:\"render\",value:function render(){var length=window.location.href.length;var current=window.location.href.slice(30,length);if(this.state.fullnamed===''){console.log(\"checking\");var nae=this.getName2();}return React.createElement(Card,{className:\"cardosettings\",style:{width:'60rem',height:'30rem'}},React.createElement(Card.Header,{className:\"header0\"},React.createElement(Nav,{variant:\"tabs\",defaultActiveKey:\"#profile\"},React.createElement(Nav.Item,null,React.createElement(Nav.Link,{className:\"linka\",href:\"#profile\"},\"Edit Profile\")),React.createElement(Nav.Item,null,React.createElement(Nav.Link,{className:\"linka\",href:\"#signout\"},\"Sign Out\")))),React.createElement(ListGroup,{variant:\"flush\"},this.navClicked(current)));}}]);return ProfileSettings;}(React.Component);export function isloggedOut(){console.log(\"lg \"+login.getUser());if(login.getUser()!==null){return false;}return true;}export function loggedOutUser(){var tempname=login.getUser();firebase.auth().signOut().then(function(){alert(\"Goodbye \"+tempname+\"!\");}).catch(function(error){alert(error.message);});}export default withRouter(ProfileSettings);","map":{"version":3,"sources":["/Users/john/Downloads/library2/lib/src/components/Profile/ProfileSettings.js"],"names":["React","Card","ListGroup","Nav","firebase","auth","provider","login","withRouter","db","firestore","ProfileSettings","props","handleNewImage","e","console","log","target","value","setState","image","addPic","collection","doc","getUID","set","ava","then","catch","error","handleScale","scale","parseFloat","handlePositionChange","position","logOutUser","tempname","getUser","signOut","alert","history","push","window","location","reload","message","changePassword","currentPassword","newPassword","reauthenticate","user","updatePassword","currentUser","cred","EmailAuthProvider","credential","email","reauthenticateWithCredential","changeUsername","newName","name","update","state","fullnamed","getName2","get","querySnapshot","data","docs","map","displayName","i","fullname","marginTop","fontWeight","getEmail","getCreated","length","href","current","slice","nae","width","height","navClicked","Component","isloggedOut","loggedOutUser"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Card from 'react-bootstrap/Card';\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport Nav from 'react-bootstrap/Nav';\nimport './Profile.css';\nimport firebase, {auth, provider} from '../../firebase.js'\nimport * as login from '../Auth/Login';\nimport {withRouter} from 'react-router-dom';\n\nconst db = firebase.firestore();\n\nclass ProfileSettings extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {\n      user: false,\n      fullnamed: this.getName2()\n    };\n  }\n\n\n    handleNewImage = e => {\n      console.log(e + e.target.value)\n      this.setState({ image: e.target.value })\n      var addPic =\n        db.collection('Users').doc(login.getUID())\n        .collection('Photos')\n        .doc('Avatar')\n        .set({\n          ava: e.target.value\n        })\n      .then(function() {\n        console.log(\"Document successfully written!\");\n      })\n      .catch(function(error) {\n        console.error(\"Error writing document: \", error);\n      });\n    }\n\n    handleScale = e => {\n      const scale = parseFloat(e.target.value)\n      this.setState({ scale })\n    }\n\n    handlePositionChange = position => {\n      this.setState({ position })\n    }\n\n  logOutUser = () => {\n  var tempname = login.getUser();\n  firebase\n  .auth()\n  .signOut()\n  .then(() => {\n    alert(\"Goodbye \" + tempname + \"!\");\n    this.props.history.push('/');\n    window.location.reload();\n  })\n  .catch(function(error) {\n    alert(error.message);\n  });\n}\n\ngetName2(){\n const db = firebase.firestore();\n var user = firebase.auth().currentUser;\n var name = '';\n db.collection(\"Users\")\n .get()\n .then(querySnapshot => {\nconst data = querySnapshot.docs.map(doc => doc.data());\nconsole.log(data )\nif(user !== null){\n  console.log(data + \" \" + user.displayName + \" \" + data[1].name)\n  for(var i in data){\nif(user.displayName === data[i].name){\n  console.log(\"yuh\" + data[i].fullname);\n  name = data[i].fullname;\n  this.setState({\n    fullnamed: name\n  });\n  return name;\n}\n}\n}\n});\nreturn name;\n}\n\n\n  changePassword = (currentPassword, newPassword) => {\n  this.reauthenticate(currentPassword).then(() => {\n    var user = login.getUser();\n    user.updatePassword(newPassword).then(() => {\n      console.log(\"Password updated!\");\n    }).catch((error) => { console.log(error); });\n  }).catch((error) => { console.log(error); });\n}\n\n  reauthenticate = (currentPassword) => {\n  var user = firebase.auth().currentUser;\n  var cred = firebase.auth.EmailAuthProvider.credential(\n      user.email, currentPassword);\n  return user.reauthenticateWithCredential(cred);\n}\n\nchangeUsername = (newName) => {\n  const db = firebase.firestore();\n  var user = firebase.auth().currentUser;\n  var name = '';\n  db.collection(\"Users\")\n  .doc(login.getUID())\n  .update({name: newName});\n  console.log(\"updated?\")\n}\n\n  navClicked(name) {\n     if(name === \"\" || name === \"profile\"){\n         return(<div>\n           <h4 style = {{marginTop: \"20px\" }}> Profile Info </h4>\n        <ListGroup.Item><p style={{ fontWeight: 'bold' }}>Username</p>\n        {login.getUser()}</ListGroup.Item>\n      <ListGroup.Item><p style={{ fontWeight: 'bold' }}>Full Name</p>{this.state.fullnamed}</ListGroup.Item>\n        <ListGroup.Item><p style={{ fontWeight: 'bold' }}>Email</p>{login.getEmail()}</ListGroup.Item>\n        <ListGroup.Item><p style={{ fontWeight: 'bold' }}>Account Created</p>{login.getCreated()}</ListGroup.Item>\n        <ListGroup.Item> New Avatar Image URL  <input name=\"newImage\" placeholder=\"https://example.com\" type=\"url\" onChange={this.handleNewImage} /></ListGroup.Item>\n         </div>\n       )\n     }else if(name === \"settings\"){\n         return(\n           <div>\n           <h4 style = {{marginTop: \"20px\" }}>Settings</h4>\n           <ListGroup.Item><p> Password: *********   </p> <button className=\"btn btn-info\" onClick={() => this.changePassword()}>\n            Change Password\n            </button></ListGroup.Item>\n           <ListGroup.Item><p> Username: {login.getUser()}    </p>\n           <form>\n  <label>\n    Name:\n    <input type=\"text\" name=\"name\" value={this.state.value}/>\n  </label>\n  <input type=\"submit\" value=\"Submit\" onClick={() => this.changeUsername(this.state.value)}/>\n</form>\n           <button className=\"btn btn-info\" onClick={() => this.changeUsername(this.state.value)}>\n            Change Username\n            </button> </ListGroup.Item>\n           </div>\n         )\n     }else if(name === \"signout\"){\n       return(\n         <div>\n         <h4 style = {{marginTop: \"20px\" }}>Sign Out</h4>\n\n         <button className=\"btn btn-danger\" style = {{marginTop: \"60px\" }}onClick={() => this.logOutUser()}>\n          Sign Out\n          </button>\n       </div>\n     )\n     }\n }\n\n\n    render(){\n        const length = window.location.href.length;\n        const current = window.location.href.slice(30, length);\n        if(this.state.fullnamed === ''){\n          console.log(\"checking\")\n          var nae = this.getName2();\n        }\n        return(\n        <Card className = \"cardosettings\" style={{ width: '60rem', height: '30rem'}}>\n          <Card.Header className = 'header0'>\n            <Nav variant=\"tabs\" defaultActiveKey=\"#profile\">\n                <Nav.Item >\n                    <Nav.Link className = 'linka' href=\"#profile\">Edit Profile</Nav.Link>\n                </Nav.Item>\n                {/*<Nav.Item>\n                    <Nav.Link className = 'linka' href=\"#settings\">Account Settings</Nav.Link>\n                </Nav.Item>*/}\n                <Nav.Item>\n                    <Nav.Link className = 'linka' href=\"#signout\">Sign Out</Nav.Link>\n                </Nav.Item>\n            </Nav>\n        </Card.Header>\n            <ListGroup variant=\"flush\">\n              {this.navClicked(current)}\n            </ListGroup>\n          </Card>\n        )\n    }\n}\n\nexport function isloggedOut(){\n  console.log(\"lg \" + login.getUser())\n  if(login.getUser() !== null){\n    return false\n  }\n    return true\n}\n\nexport function loggedOutUser(){\nvar tempname = login.getUser();\nfirebase\n.auth()\n.signOut()\n.then(() => {\n  alert(\"Goodbye \" + tempname + \"!\");\n})\n.catch(function(error) {\n  alert(error.message);\n});\n}\n\nexport default withRouter(ProfileSettings);\n"]},"metadata":{},"sourceType":"module"}