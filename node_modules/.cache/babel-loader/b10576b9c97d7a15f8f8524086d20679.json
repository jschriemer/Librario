{"ast":null,"code":"var _jsxFileName = \"/Users/john/Downloads/library2/src/components/Profile/ProfileSettings.js\";\nimport React from 'react';\nimport Card from 'react-bootstrap/Card';\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport Nav from 'react-bootstrap/Nav';\nimport './Profile.css';\nimport firebase, { auth, provider } from '../../firebase.js';\nimport * as login from '../Auth/Login';\nimport { withRouter } from 'react-router-dom';\nconst db = firebase.firestore();\n\nclass ProfileSettings extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleNewImage = e => {\n      console.log(e + e.target.value);\n      this.setState({\n        image: e.target.value\n      });\n      var addPic = db.collection('Users').doc(login.getUID()).collection('Photos').doc('Avatar').set({\n        ava: e.target.value\n      }).then(function () {\n        console.log(\"Document successfully written!\");\n      }).catch(function (error) {\n        console.error(\"Error writing document: \", error);\n      });\n    };\n\n    this.handleScale = e => {\n      const scale = parseFloat(e.target.value);\n      this.setState({\n        scale\n      });\n    };\n\n    this.handlePositionChange = position => {\n      this.setState({\n        position\n      });\n    };\n\n    this.logOutUser = () => {\n      var tempname = login.getUser();\n      firebase.auth().signOut().then(() => {\n        alert(\"Goodbye \" + tempname + \"!\");\n        this.props.history.push('/');\n        window.location.reload();\n      }).catch(function (error) {\n        alert(error.message);\n      });\n    };\n\n    this.changePassword = (currentPassword, newPassword) => {\n      this.reauthenticate(currentPassword).then(() => {\n        var user = login.getUser();\n        user.updatePassword(newPassword).then(() => {\n          console.log(\"Password updated!\");\n        }).catch(error => {\n          console.log(error);\n        });\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.reauthenticate = currentPassword => {\n      var user = firebase.auth().currentUser;\n      var cred = firebase.auth.EmailAuthProvider.credential(user.email, currentPassword);\n      return user.reauthenticateWithCredential(cred);\n    };\n\n    this.changeUsername = newName => {\n      const db = firebase.firestore();\n      var user = firebase.auth().currentUser;\n      var name = '';\n      db.collection(\"Users\").doc(login.getUID()).update({\n        name: newName\n      });\n      console.log(\"updated?\");\n    };\n\n    this.state = {\n      user: false,\n      fullnamed: this.getName2()\n    };\n  }\n\n  getName2() {\n    const db = firebase.firestore();\n    var user = firebase.auth().currentUser;\n    var name = '';\n    db.collection(\"Users\").get().then(querySnapshot => {\n      const data = querySnapshot.docs.map(doc => doc.data());\n      console.log(data);\n\n      if (user !== null) {\n        console.log(data + \" \" + user.displayName + \" \" + data[1].name);\n\n        for (var i in data) {\n          if (user.displayName === data[i].name) {\n            console.log(\"yuh\" + data[i].fullname);\n            name = data[i].fullname;\n            this.setState({\n              fullnamed: name\n            });\n            return name;\n          }\n        }\n      }\n    });\n    return name;\n  }\n\n  navClicked(name) {\n    if (name === \"\" || name === \"profile\") {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        style: {\n          marginTop: \"20px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \" Profile Info \"), React.createElement(ListGroup.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        style: {\n          fontWeight: 'bold'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, \"Username\"), login.getUser()), React.createElement(ListGroup.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        style: {\n          fontWeight: 'bold'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \"Full Name\"), this.state.fullnamed), React.createElement(ListGroup.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        style: {\n          fontWeight: 'bold'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, \"Email\"), login.getEmail()), React.createElement(ListGroup.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        style: {\n          fontWeight: 'bold'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, \"Account Created\"), login.getCreated()), React.createElement(ListGroup.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, \" New Avatar Image URL  \", React.createElement(\"input\", {\n        name: \"newImage\",\n        placeholder: \"https://example.com\",\n        type: \"url\",\n        onChange: this.handleNewImage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      })));\n    } else if (name === \"settings\") {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        style: {\n          marginTop: \"20px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \"Settings\"), React.createElement(ListGroup.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \" Password: *********   \"), \" \", React.createElement(\"button\", {\n        className: \"btn btn-info\",\n        onClick: () => this.changePassword(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"Change Password\")), React.createElement(ListGroup.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, \" Username: \", login.getUser(), \"    \"), React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, \"Name:\", React.createElement(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        value: this.state.value,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      })), React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"Submit\",\n        onClick: () => this.changeUsername(this.state.value),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        className: \"btn btn-info\",\n        onClick: () => this.changeUsername(this.state.value),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, \"Change Username\"), \" \"));\n    } else if (name === \"signout\") {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        style: {\n          marginTop: \"20px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"Sign Out\"), React.createElement(\"button\", {\n        className: \"btn btn-danger\",\n        style: {\n          marginTop: \"60px\"\n        },\n        onClick: () => this.logOutUser(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, \"Sign Out\"));\n    }\n  }\n\n  render() {\n    const length = window.location.href.length;\n    const current = window.location.href.slice(30, length);\n\n    if (this.state.fullnamed === '') {\n      console.log(\"checking\");\n      var nae = this.getName2();\n    }\n\n    return React.createElement(Card, {\n      className: \"cardosettings\",\n      style: {\n        width: '60rem',\n        height: '30rem'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(Card.Header, {\n      className: \"header0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(Nav, {\n      variant: \"tabs\",\n      defaultActiveKey: \"#profile\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(Nav.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(Nav.Link, {\n      className: \"linka\",\n      href: \"#profile\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, \"Edit Profile\")), React.createElement(Nav.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(Nav.Link, {\n      className: \"linka\",\n      href: \"#signout\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"Sign Out\")))), React.createElement(ListGroup, {\n      variant: \"flush\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, this.navClicked(current)));\n  }\n\n}\n\nexport function isloggedOut() {\n  console.log(\"lg \" + login.getUser());\n\n  if (login.getUser() !== null) {\n    return false;\n  }\n\n  return true;\n}\nexport function loggedOutUser() {\n  var tempname = login.getUser();\n  firebase.auth().signOut().then(() => {\n    alert(\"Goodbye \" + tempname + \"!\");\n  }).catch(function (error) {\n    alert(error.message);\n  });\n}\nexport default withRouter(ProfileSettings);","map":{"version":3,"sources":["/Users/john/Downloads/library2/src/components/Profile/ProfileSettings.js"],"names":["React","Card","ListGroup","Nav","firebase","auth","provider","login","withRouter","db","firestore","ProfileSettings","Component","constructor","props","handleNewImage","e","console","log","target","value","setState","image","addPic","collection","doc","getUID","set","ava","then","catch","error","handleScale","scale","parseFloat","handlePositionChange","position","logOutUser","tempname","getUser","signOut","alert","history","push","window","location","reload","message","changePassword","currentPassword","newPassword","reauthenticate","user","updatePassword","currentUser","cred","EmailAuthProvider","credential","email","reauthenticateWithCredential","changeUsername","newName","name","update","state","fullnamed","getName2","get","querySnapshot","data","docs","map","displayName","i","fullname","navClicked","marginTop","fontWeight","getEmail","getCreated","render","length","href","current","slice","nae","width","height","isloggedOut","loggedOutUser"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Card from 'react-bootstrap/Card';\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport Nav from 'react-bootstrap/Nav';\nimport './Profile.css';\nimport firebase, {auth, provider} from '../../firebase.js'\nimport * as login from '../Auth/Login';\nimport {withRouter} from 'react-router-dom';\n\nconst db = firebase.firestore();\n\nclass ProfileSettings extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {\n      user: false,\n      fullnamed: this.getName2()\n    };\n  }\n\n\n    handleNewImage = e => {\n      console.log(e + e.target.value)\n      this.setState({ image: e.target.value })\n      var addPic =\n        db.collection('Users').doc(login.getUID())\n        .collection('Photos')\n        .doc('Avatar')\n        .set({\n          ava: e.target.value\n        })\n      .then(function() {\n        console.log(\"Document successfully written!\");\n      })\n      .catch(function(error) {\n        console.error(\"Error writing document: \", error);\n      });\n    }\n\n    handleScale = e => {\n      const scale = parseFloat(e.target.value)\n      this.setState({ scale })\n    }\n\n    handlePositionChange = position => {\n      this.setState({ position })\n    }\n\n  logOutUser = () => {\n  var tempname = login.getUser();\n  firebase\n  .auth()\n  .signOut()\n  .then(() => {\n    alert(\"Goodbye \" + tempname + \"!\");\n    this.props.history.push('/');\n    window.location.reload();\n  })\n  .catch(function(error) {\n    alert(error.message);\n  });\n}\n\ngetName2(){\n const db = firebase.firestore();\n var user = firebase.auth().currentUser;\n var name = '';\n db.collection(\"Users\")\n .get()\n .then(querySnapshot => {\nconst data = querySnapshot.docs.map(doc => doc.data());\nconsole.log(data )\nif(user !== null){\n  console.log(data + \" \" + user.displayName + \" \" + data[1].name)\n  for(var i in data){\nif(user.displayName === data[i].name){\n  console.log(\"yuh\" + data[i].fullname);\n  name = data[i].fullname;\n  this.setState({\n    fullnamed: name\n  });\n  return name;\n}\n}\n}\n});\nreturn name;\n}\n\n\n  changePassword = (currentPassword, newPassword) => {\n  this.reauthenticate(currentPassword).then(() => {\n    var user = login.getUser();\n    user.updatePassword(newPassword).then(() => {\n      console.log(\"Password updated!\");\n    }).catch((error) => { console.log(error); });\n  }).catch((error) => { console.log(error); });\n}\n\n  reauthenticate = (currentPassword) => {\n  var user = firebase.auth().currentUser;\n  var cred = firebase.auth.EmailAuthProvider.credential(\n      user.email, currentPassword);\n  return user.reauthenticateWithCredential(cred);\n}\n\nchangeUsername = (newName) => {\n  const db = firebase.firestore();\n  var user = firebase.auth().currentUser;\n  var name = '';\n  db.collection(\"Users\")\n  .doc(login.getUID())\n  .update({name: newName});\n  console.log(\"updated?\")\n}\n\n  navClicked(name) {\n     if(name === \"\" || name === \"profile\"){\n         return(<div>\n           <h4 style = {{marginTop: \"20px\" }}> Profile Info </h4>\n        <ListGroup.Item><p style={{ fontWeight: 'bold' }}>Username</p>\n        {login.getUser()}</ListGroup.Item>\n      <ListGroup.Item><p style={{ fontWeight: 'bold' }}>Full Name</p>{this.state.fullnamed}</ListGroup.Item>\n        <ListGroup.Item><p style={{ fontWeight: 'bold' }}>Email</p>{login.getEmail()}</ListGroup.Item>\n        <ListGroup.Item><p style={{ fontWeight: 'bold' }}>Account Created</p>{login.getCreated()}</ListGroup.Item>\n        <ListGroup.Item> New Avatar Image URL  <input name=\"newImage\" placeholder=\"https://example.com\" type=\"url\" onChange={this.handleNewImage} /></ListGroup.Item>\n         </div>\n       )\n     }else if(name === \"settings\"){\n         return(\n           <div>\n           <h4 style = {{marginTop: \"20px\" }}>Settings</h4>\n           <ListGroup.Item><p> Password: *********   </p> <button className=\"btn btn-info\" onClick={() => this.changePassword()}>\n            Change Password\n            </button></ListGroup.Item>\n           <ListGroup.Item><p> Username: {login.getUser()}    </p>\n           <form>\n  <label>\n    Name:\n    <input type=\"text\" name=\"name\" value={this.state.value}/>\n  </label>\n  <input type=\"submit\" value=\"Submit\" onClick={() => this.changeUsername(this.state.value)}/>\n</form>\n           <button className=\"btn btn-info\" onClick={() => this.changeUsername(this.state.value)}>\n            Change Username\n            </button> </ListGroup.Item>\n           </div>\n         )\n     }else if(name === \"signout\"){\n       return(\n         <div>\n         <h4 style = {{marginTop: \"20px\" }}>Sign Out</h4>\n\n         <button className=\"btn btn-danger\" style = {{marginTop: \"60px\" }}onClick={() => this.logOutUser()}>\n          Sign Out\n          </button>\n       </div>\n     )\n     }\n }\n\n\n    render(){\n        const length = window.location.href.length;\n        const current = window.location.href.slice(30, length);\n        if(this.state.fullnamed === ''){\n          console.log(\"checking\")\n          var nae = this.getName2();\n        }\n        return(\n        <Card className = \"cardosettings\" style={{ width: '60rem', height: '30rem'}}>\n          <Card.Header className = 'header0'>\n            <Nav variant=\"tabs\" defaultActiveKey=\"#profile\">\n                <Nav.Item >\n                    <Nav.Link className = 'linka' href=\"#profile\">Edit Profile</Nav.Link>\n                </Nav.Item>\n                {/*<Nav.Item>\n                    <Nav.Link className = 'linka' href=\"#settings\">Account Settings</Nav.Link>\n                </Nav.Item>*/}\n                <Nav.Item>\n                    <Nav.Link className = 'linka' href=\"#signout\">Sign Out</Nav.Link>\n                </Nav.Item>\n            </Nav>\n        </Card.Header>\n            <ListGroup variant=\"flush\">\n              {this.navClicked(current)}\n            </ListGroup>\n          </Card>\n        )\n    }\n}\n\nexport function isloggedOut(){\n  console.log(\"lg \" + login.getUser())\n  if(login.getUser() !== null){\n    return false\n  }\n    return true\n}\n\nexport function loggedOutUser(){\nvar tempname = login.getUser();\nfirebase\n.auth()\n.signOut()\n.then(() => {\n  alert(\"Goodbye \" + tempname + \"!\");\n})\n.catch(function(error) {\n  alert(error.message);\n});\n}\n\nexport default withRouter(ProfileSettings);\n"]},"metadata":{},"sourceType":"module"}