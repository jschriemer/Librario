{"ast":null,"code":"var _jsxFileName = \"/Users/john/Downloads/library2/src/components/Library/desktopLibrary.js\";\nimport React from 'react';\nimport Card from 'react-bootstrap/Card';\nimport CardColumns from 'react-bootstrap/CardColumns';\nimport Button from 'react-bootstrap/Button';\nimport firebase, { auth, provider } from '../../firebase';\nimport './Library.css';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Popover from 'react-bootstrap/Popover';\nimport Slide from 'react-reveal/Slide';\nimport * as login from '../Auth/Login.js';\nimport Avatar from 'react-avatar';\nimport { useToasts, ToastProvider } from 'react-toast-notifications';\nconst db = firebase.firestore();\nvar deleteFlag = 0;\nexport default class MobileLibrary extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.toolTap = (title, author, description, coverurl) => {\n      return React.createElement(Popover, {\n        id: \"popover-basic\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, React.createElement(Popover.Title, {\n        as: \"h3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, title), React.createElement(Popover.Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, description, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }), React.createElement(ToastProvider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(ToastDemo, {\n        content: \"Book removed!\",\n        title: title,\n        this: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      })), React.createElement(Button, {\n        variant: \"info\",\n        onClick: () => this.current(title, author, description, coverurl),\n        size: \"sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, \" Currently Reading\")));\n    };\n\n    this.current = (name, author, description, image) => {\n      var addBook = db.collection('Users').doc(login.getUID()).collection('CurrentBook').doc(login.getUID()).set({\n        title: name,\n        author: author,\n        description: description,\n        coverurl: image\n      }).then(function () {\n        console.log(\"Document successfully written!\");\n      }).catch(function (error) {\n        console.error(\"Error writing document: \", error);\n      });\n    };\n\n    this.state = {\n      bookcount: 0,\n      data: '',\n      delete: false,\n      show: false,\n      setShow: false,\n      current: \"\"\n    };\n  }\n\n  componentDidMount() {\n    db.collection(\"Users\").doc(login.getUID()).collection(\"Library\").get().then(querySnapshot => {\n      const data = querySnapshot.docs.map(doc => doc.data());\n      this.setState({\n        bookcount: data.length,\n        data: data\n      });\n    });\n  }\n\n  getBooks() {\n    db.collection(\"Library\").get().then(querySnapshot => {\n      const data = querySnapshot.docs.map(doc => doc.data());\n      return data;\n    });\n  }\n\n  setShow(show) {\n    this.setState({\n      show: !show\n    });\n  }\n\n  render() {\n    if (deleteFlag === 1) {\n      console.log(\"# \" + this.state.bookcount + \" #\" + this.state.delete);\n      console.log(deleteFlag + \" YES \");\n      this.setState({\n        delete: !this.state.delete,\n        bookcount: this.state.bookcount - 1\n      });\n      deleteFlag = 0;\n    }\n\n    db.collection('Users').doc(login.getUID()).collection('CurrentBook').get().then(querySnapshot => {\n      var currentdata = querySnapshot.docs.map(doc => doc.data());\n      this.setState({\n        current: currentdata[0]\n      });\n    });\n\n    if (this.state.bookcount > 0) {\n      if (this.state.current !== undefined) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }, React.createElement(CardColumns, {\n          className: \"postlarge\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }, React.createElement(Card, {\n          className: \"currentRead\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }, React.createElement(Avatar, {\n          className: \"ava\",\n          name: login.getUser(),\n          round: true,\n          style: {\n            marginBottom: \"20px\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        }), React.createElement(Card.Title, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, \"You are reading\"), React.createElement(Card.Subtitle, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }, this.state.current.title, \" by \", this.state.current.author), React.createElement(Card.Img, {\n          style: {\n            width: '100px'\n          },\n          src: this.state.current.coverurl,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        })), this.state.data.map((data, index) => {\n          return React.createElement(\"div\", {\n            key: index.toString(),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 142\n            },\n            __self: this\n          }, React.createElement(Slide, {\n            bottom: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 143\n            },\n            __self: this\n          }, React.createElement(Card, {\n            className: \"imgCardlib\",\n            key: data.uniqueId,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 144\n            },\n            __self: this\n          }, React.createElement(OverlayTrigger, {\n            trigger: \"click\",\n            placement: \"bottom\",\n            overlay: this.toolTap(data.title, data.author, data.description, data.coverurl),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 145\n            },\n            __self: this\n          }, React.createElement(Card.Img, {\n            \"data-tip\": true,\n            \"data-for\": \"clickme\",\n            \"data-event\": \"click\",\n            variant: \"top\",\n            src: data.coverurl,\n            style: {\n              width: '10em',\n              marginBottom: '30px',\n              paddingRight: '0px'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 146\n            },\n            __self: this\n          })))));\n        })));\n      } else {\n        var deleted = this.state.delete;\n        return React.createElement(\"div\", {\n          className: \"library\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          style: {\n            color: \"white\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160\n          },\n          __self: this\n        }, this.state.fname, \"'s Library \"), React.createElement(CardColumns, {\n          className: \"post\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }, React.createElement(Card, {\n          className: \"currentRead\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162\n          },\n          __self: this\n        }, React.createElement(Avatar, {\n          style: {\n            marginBottom: '30px'\n          },\n          className: \"ava\",\n          name: this.state.fname,\n          round: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163\n          },\n          __self: this\n        }), React.createElement(Card.Title, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164\n          },\n          __self: this\n        }, this.state.fname, \" is not reading anything!\")), this.state.data.map((data, index) => {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 168\n            },\n            __self: this\n          }, React.createElement(Slide, {\n            bottom: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 169\n            },\n            __self: this\n          }, React.createElement(Card, {\n            className: \"imgCardlib\",\n            key: data.uniqueId,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 170\n            },\n            __self: this\n          }, React.createElement(OverlayTrigger, {\n            trigger: \"click\",\n            placement: \"bottom\",\n            overlay: this.toolTap(data.title, data.author, data.description, data.coverurl),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 171\n            },\n            __self: this\n          }, React.createElement(Card.Img, {\n            \"data-tip\": true,\n            \"data-for\": \"clickme\",\n            \"data-event\": \"click\",\n            variant: \"top\",\n            src: data.coverurl,\n            style: {\n              width: '10em',\n              marginBottom: '30px',\n              paddingRight: '0px'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 172\n            },\n            __self: this\n          })))));\n        })));\n      }\n    } else {\n      return React.createElement(\"div\", {\n        className: \"emptylibrary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        style: {\n          color: \"white\",\n          fontSize: \"28px\",\n          height: '85.7vh'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, \"No books in your library.\"));\n    }\n  }\n\n}\n\nfunction bookimagecheck(index, books) {\n  if (books.items[index].volumeInfo.imageLinks === undefined) {\n    console.log(\"undefined image! @ \" + books.items[index]);\n    return '../images/cannotfind.png';\n  } else {\n    return books.items[index].volumeInfo.imageLinks.thumbnail;\n  }\n}\n\nfunction descriptioncheck(index, books) {\n  var descript = books.items[index].volumeInfo.description;\n  var length = 135;\n\n  if (descript !== undefined) {\n    if (descript.length >= length) {\n      descript = descript.substring(0, length - 3) + \"...\";\n      return descript;\n    } else {\n      return descript;\n    }\n  } else {\n    return \"no description available\";\n  }\n}\n\nfunction authorCheck(index, books) {\n  console.log(books.items[index].volumeInfo.authors);\n\n  if (books.items[index].volumeInfo.authors === undefined) {\n    return '';\n  } else {\n    var tempstring = \"\";\n    var authlen = books.items[index].volumeInfo.authors.length;\n\n    for (var i = 0; i < authlen; i++) {\n      if (authlen > 1) {\n        if (i === authlen - 1) {\n          tempstring = tempstring + books.items[index].volumeInfo.authors[i];\n        } else {\n          tempstring = tempstring + books.items[index].volumeInfo.authors[i] + \", \";\n        }\n      } else {\n        tempstring = tempstring + books.items[index].volumeInfo.authors[i] + \" \";\n      }\n    }\n\n    return tempstring;\n  }\n}\n\nexport const ToastDemo = ({\n  content,\n  title\n}) => {\n  const {\n    addToast\n  } = useToasts();\n  return React.createElement(Button, {\n    onClick: () => {\n      addToast(content, {\n        appearance: 'error',\n        autoDismiss: true\n      });\n      handleRemoveBook(title);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242\n    },\n    __self: this\n  }, \"Remove Book\");\n};\n\nfunction handleRemoveBook(name) {\n  db.collection('Users').doc(login.getUID()).collection('Library').doc(name).delete().then(function () {\n    console.log(\"Book deleted\");\n    deleteFlag = 1;\n  }).catch(function (error) {\n    console.error(\"Error deleting document: \", error);\n  });\n}","map":{"version":3,"sources":["/Users/john/Downloads/library2/src/components/Library/desktopLibrary.js"],"names":["React","Card","CardColumns","Button","firebase","auth","provider","OverlayTrigger","Popover","Slide","login","Avatar","useToasts","ToastProvider","db","firestore","deleteFlag","MobileLibrary","Component","constructor","props","toolTap","title","author","description","coverurl","current","name","image","addBook","collection","doc","getUID","set","then","console","log","catch","error","state","bookcount","data","delete","show","setShow","componentDidMount","get","querySnapshot","docs","map","setState","length","getBooks","render","currentdata","undefined","getUser","marginBottom","width","index","toString","uniqueId","paddingRight","deleted","color","fname","fontSize","height","bookimagecheck","books","items","volumeInfo","imageLinks","thumbnail","descriptioncheck","descript","substring","authorCheck","authors","tempstring","authlen","i","ToastDemo","content","addToast","appearance","autoDismiss","handleRemoveBook"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Card from 'react-bootstrap/Card';\nimport CardColumns from 'react-bootstrap/CardColumns';\nimport Button from 'react-bootstrap/Button'\nimport firebase, {auth, provider} from '../../firebase'\nimport './Library.css';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Popover from 'react-bootstrap/Popover';\nimport Slide from 'react-reveal/Slide';\nimport * as login from '../Auth/Login.js';\nimport Avatar from 'react-avatar';\nimport { useToasts, ToastProvider } from 'react-toast-notifications'\n\nconst db = firebase.firestore();\nvar deleteFlag = 0;\n\nexport default class MobileLibrary extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {\n      bookcount: 0,\n      data: '',\n      delete: false,\n      show: false,\n      setShow: false,\n      current: \"\"\n    }\n  }\n\n  componentDidMount() {\n    db.collection(\"Users\")\n    .doc(login.getUID()).collection(\"Library\")\n      .get()\n      .then(querySnapshot => {\n        const data = querySnapshot.docs.map(doc => doc.data());\n        this.setState({\n          bookcount: data.length,\n          data:data\n         });\n      });\n  }\n\n\n   getBooks(){\n     db.collection(\"Library\")\n     .get()\n     .then(querySnapshot => {\n    const data = querySnapshot.docs.map(doc => doc.data());\n    return data;\n    });\n   }\n\n   toolTap = (title, author, description, coverurl) => {\n     return(\n       <Popover id=\"popover-basic\">\n       <Popover.Title as=\"h3\">{title}</Popover.Title>\n       <Popover.Content>\n         {description}\n         <br></br>\n         <ToastProvider>\n           <ToastDemo\n           content = \"Book removed!\"\n           title = {title}\n           this = {this}\n           />\n         </ToastProvider>\n\n         <Button variant=\"info\" onClick = { () =>\n           this.current(\n             title,\n             author,\n             description,\n             coverurl\n           )\n         } size=\"sm\"> Currently Reading</Button>\n       </Popover.Content>\n     </Popover>)\n   }\n\n   setShow(show){\n     this.setState({\n       show: !show\n     })\n   }\n\n   current = (name, author, description, image) => {\n     var addBook =\n       db.collection('Users').doc(login.getUID())\n       .collection('CurrentBook')\n       .doc(login.getUID())\n       .set({\n         title: name,\n         author: author,\n         description: description,\n         coverurl: image\n       })\n     .then(function() {\n       console.log(\"Document successfully written!\");\n     })\n     .catch(function(error) {\n       console.error(\"Error writing document: \", error);\n     });\n   }\n\n\n   render(){\n\n     if(deleteFlag === 1){\n           console.log(\"# \" + this.state.bookcount + \" #\" + this.state.delete)\n           console.log(deleteFlag + \" YES \")\n           this.setState({\n             delete: !this.state.delete,\n             bookcount: this.state.bookcount - 1\n           })\n           deleteFlag = 0;\n         }\n\n         db.collection('Users').doc(login.getUID())\n         .collection('CurrentBook')\n         .get()\n         .then(querySnapshot => {\n         var currentdata = querySnapshot.docs.map(doc => doc.data());\n         this.setState({\n           current: currentdata[0]\n         })\n        });\n\n\n     if(this.state.bookcount > 0){\n      if(this.state.current !== undefined){\n     return(\n       <div>\n       <CardColumns className = 'postlarge'>\n         <Card className = 'currentRead'>\n           <Avatar className = \"ava\" name={login.getUser()} round={true} style = {{marginBottom: \"20px\"}}/>\n           <Card.Title>You are reading</Card.Title>\n           <Card.Subtitle>{this.state.current.title} by {this.state.current.author}</Card.Subtitle>\n           <Card.Img style={{width : '100px'}} src={this.state.current.coverurl}></Card.Img>\n         </Card>\n         {this.state.data.map((data, index) => {\n           return(\n             <div key={index.toString()}>\n               <Slide bottom>\n                 <Card className = 'imgCardlib' key={data.uniqueId}>\n                   <OverlayTrigger trigger=\"click\" placement=\"bottom\" overlay={this.toolTap(data.title, data.author, data.description, data.coverurl)}>\n                     <Card.Img data-tip data-for='clickme' data-event='click' variant=\"top\" src={data.coverurl} style = {{width: '10em', marginBottom: '30px', paddingRight: '0px'}} />\n                   </OverlayTrigger>\n                 </Card>\n               </Slide>\n             </div>\n           )\n         })}\n         </CardColumns>\n       </div>\n     );\n   }else{\n       var deleted = this.state.delete;\n       return(\n         <div className = 'library'>\n         <h1 style = {{color: \"white\"}}>{this.state.fname}'s Library </h1>\n           <CardColumns className = 'post'>\n           <Card className = 'currentRead'>\n           <Avatar style = {{marginBottom: '30px'}} className = \"ava\" name={this.state.fname} round={true}/>\n             <Card.Title>{this.state.fname} is not reading anything!</Card.Title>\n           </Card>\n       {this.state.data.map((data, index) => {\n        return(\n          <div>\n           <Slide bottom>\n           <Card className = 'imgCardlib' key={data.uniqueId}>\n           <OverlayTrigger trigger=\"click\" placement=\"bottom\" overlay={this.toolTap(data.title, data.author, data.description, data.coverurl)}>\n             <Card.Img data-tip data-for='clickme' data-event='click' variant=\"top\" src={data.coverurl} style = {{width: '10em', marginBottom: '30px', paddingRight: '0px'}} />\n             </OverlayTrigger>\n           </Card>\n           </Slide>\n         </div>\n   );})}\n     </CardColumns>\n     </div>\n   );\n   }\n   }else{\n     return(\n         <div className = 'emptylibrary'>\n         <p style = {{color: \"white\", fontSize: \"28px\", height: '85.7vh'}}>No books in your library.</p>\n         </div>\n       );\n     }\n   }\n }\n\n\nfunction bookimagecheck(index, books){\n  if(books.items[index].volumeInfo.imageLinks === undefined){\n    console.log(\"undefined image! @ \" + books.items[index]);\n    return '../images/cannotfind.png';\n  }else{\n    return books.items[index].volumeInfo.imageLinks.thumbnail;\n  }\n}\n\nfunction descriptioncheck(index, books){\n  var descript = books.items[index].volumeInfo.description\n  var length = 135;\n  if(descript !== undefined){\n    if(descript.length >= length){\n      descript = descript.substring(0, length - 3) + \"...\"\n      return descript;\n    }else{\n      return descript;\n  }\n}else{\n  return \"no description available\";\n}\n}\n\nfunction authorCheck(index, books){\n  console.log(books.items[index].volumeInfo.authors)\n  if(books.items[index].volumeInfo.authors === undefined){\n    return '';\n  }else{\n    var tempstring = \"\"\n    var authlen = books.items[index].volumeInfo.authors.length;\n    for(var i = 0; i < authlen; i++){\n      if(authlen > 1){\n        if(i === authlen-1){\n          tempstring = tempstring + books.items[index].volumeInfo.authors[i]\n        }else{\n      tempstring = tempstring + books.items[index].volumeInfo.authors[i] + \", \"\n    }\n    }else{\n      tempstring = tempstring + books.items[index].volumeInfo.authors[i] + \" \"\n    }\n    }\n    return tempstring;\n  }\n}\n\nexport const ToastDemo = ({ content, title}) => {\n  const { addToast } = useToasts()\n  return (\n    <Button onClick={() => {addToast(content, {\n      appearance: 'error',\n      autoDismiss: true,\n      });\n      handleRemoveBook(\n        title\n      );\n    }\n  }>\n  Remove Book\n  </Button>\n  )\n}\n\nfunction handleRemoveBook(name){\n  db.collection('Users').doc(login.getUID())\n  .collection('Library')\n  .doc(name)\n  .delete()\n  .then(function() {\n    console.log(\"Book deleted\");\n    deleteFlag = 1;\n\n })\n  .catch(function(error) {\n    console.error(\"Error deleting document: \", error);\n  });\n}\n"]},"metadata":{},"sourceType":"module"}