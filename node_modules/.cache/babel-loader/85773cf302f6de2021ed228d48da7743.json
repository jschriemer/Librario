{"ast":null,"code":"import _slicedToArray from\"/Users/john/Downloads/library2/lib/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"/Users/john/Downloads/library2/lib/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/john/Downloads/library2/lib/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/john/Downloads/library2/lib/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/john/Downloads/library2/lib/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/john/Downloads/library2/lib/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/john/Downloads/library2/lib/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/john/Downloads/library2/lib/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/john/Downloads/library2/lib/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{useState}from'react';import Card from'react-bootstrap/Card';import CardColumns from'react-bootstrap/CardColumns';import'../stylesheets/DeckoCards.css';import Form from'react-bootstrap/Form';import Button from'react-bootstrap/Button';import axios from\"axios\";import firebase from'../firebase';import*as login from'./Auth/Login.js';import*as ps from'./Profile/ProfileSettings.js';import{useToasts,ToastProvider}from'react-toast-notifications';import Fade from'react-reveal/Fade';var BASE_URL=\"https://www.googleapis.com/books/v1/volumes\";var db=firebase.firestore();var DeckoCards=/*#__PURE__*/function(_React$Component){_inherits(DeckoCards,_React$Component);function DeckoCards(){var _this;_classCallCheck(this,DeckoCards);_this=_possibleConstructorReturn(this,_getPrototypeOf(DeckoCards).call(this));_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var items,value,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log('A name was submitted: '+_this.state.value);items='';event.preventDefault();value=_this.state.value;_context.next=6;return axios.get(\"\".concat(BASE_URL,\"?q=\").concat(value));case 6:result=_context.sent;console.log(result.data);_this.setState({flag:1,books:result.data,volumeInfo:result.data.items.volumeInfo,show:false});case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.descriptioncheck=function(index,books,flag){var descript=books.items[index].volumeInfo.description;var length=135;if(descript!==undefined){if(flag!=='data'){if(descript.length>=length){descript=descript.substring(0,length-3)+\"...\";//showmore button should go here\nreturn React.createElement(\"div\",null,descript);}else{return descript;}}else if(flag==='showmore'){//Showless feature should go here\nreturn React.createElement(\"div\",null,descript);}else{return descript;}}else{return\"no description available\";}};_this.state={value:'',flag:0,books:[],volumeInfo:[],user:false,descriptio:'first',show:false};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(DeckoCards,[{key:\"handleChange\",value:function handleChange(event){this.setState({value:event.target.value});}},{key:\"usercheck\",value:function usercheck(){if(!ps.isloggedOut()){if(this.state.user===false)this.setState({user:true});return true;}return false;}},{key:\"render\",value:function render(){var _this2=this;var content=\"Book Added! Find it in your library\";if(this.state.flag===0){return React.createElement(Fade,null,React.createElement(\"div\",{className:\"searchBar\"},React.createElement(\"br\",{className:\"brdeck\"}),React.createElement(\"h1\",{style:{marginBottom:\"20px\"}},\" Librario \"),React.createElement(Form,{inline:true,onSubmit:this.handleSubmit},React.createElement(Form.Control,{className:\"booksearch\",size:\"lg\",type:\"text\",placeholder:\"Search by Book or Author\",value:this.state.value,onChange:this.handleChange}),React.createElement(Button,{className:\"submitbtn\",variant:\"secondary\",type:\"submit\",size:\"lg\"},\"Search\")),React.createElement(\"br\",{className:\"brdeck\"}),React.createElement(\"p\",null,\".\")));}else if(this.state.user&&this.usercheck()){return React.createElement(\"div\",{className:\"searchresults\"},React.createElement(Form,{inline:true,onSubmit:this.handleSubmit},React.createElement(\"br\",{className:\"searched\"}),React.createElement(Form.Control,{className:\"booksearch\",size:\"lg\",type:\"text\",placeholder:\"Search by Book or Author\",value:this.state.value,onChange:this.handleChange}),React.createElement(Button,{className:\"submitbtn\",variant:\"secondary\",type:\"submit\",size:\"lg\"},\"Submit\")),React.createElement(\"ul\",null,this.state.books.items.map(function(books,index){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];return React.createElement(\"div\",{className:\"body\"},React.createElement(CardColumns,{className:\"deck\",style:{display:'flex',flexDirection:'row',width:'50rem'}},React.createElement(Fade,null,React.createElement(Card,{className:\"imgCarddeck\",key:books.uniqueId},React.createElement(Card.Img,{variant:\"top\",src:bookimagecheck(index,_this2.state.books),style:{width:'100px'}})),React.createElement(Card,null,React.createElement(Card.Body,null,React.createElement(Card.Title,null,_this2.state.books.items[index].volumeInfo.title),React.createElement(Card.Subtitle,{className:\"mb-2 text-muted\"},authorCheck(index,_this2.state.books)),React.createElement(Card.Text,null,_this2.descriptioncheck(index,_this2.state.books,false)),React.createElement(ToastProvider,null,React.createElement(ToastDemo,{title:_this2.state.books.items[index].volumeInfo.title,author:authorCheck(index,_this2.state.books),coverurl:bookimagecheck(index,_this2.state.books),description:_this2.descriptioncheck(index,_this2.state.books,'data'),content:\"Book Added! find it in your Library\"})))))));})));}else{return React.createElement(\"div\",{className:\"searchresults\"},React.createElement(Form,{inline:true,onSubmit:this.handleSubmit},React.createElement(\"br\",{className:\"searched\"}),React.createElement(Form.Control,{className:\"booksearch\",size:\"lg\",type:\"text\",placeholder:\"Search by Book or Author\",value:this.state.value,onChange:this.handleChange}),React.createElement(Button,{className:\"submitbtn\",variant:\"secondary\",type:\"submit\",size:\"lg\"},\"Submit\")),React.createElement(\"ul\",null,this.state.books.items.map(function(books,index){return React.createElement(\"div\",{className:\"body\"},React.createElement(CardColumns,{className:\"deck\",style:{display:'flex',flexDirection:'row',width:'50rem'}},React.createElement(Fade,null,React.createElement(Card,{className:\"imgCarddeck\",key:books.uniqueId},React.createElement(Card.Img,{variant:\"top\",src:bookimagecheck(index,_this2.state.books),style:{width:'100px'}})),React.createElement(Card,null,React.createElement(Card.Body,null,React.createElement(Card.Title,null,_this2.state.books.items[index].volumeInfo.title),React.createElement(Card.Subtitle,{className:\"mb-2 text-muted\"},authorCheck(index,_this2.state.books)),React.createElement(Card.Text,null,_this2.descriptioncheck(index,_this2.state.books,'first')),React.createElement(ToastProvider,null,React.createElement(ToastDemo,{title:_this2.state.books.items[index].volumeInfo.title,author:authorCheck(index,_this2.state.books),coverurl:bookimagecheck(index,_this2.state.books),description:_this2.descriptioncheck(index,_this2.state.books,'data'),content:\"Book Added! find it in your Library\"})))))));})));}}}]);return DeckoCards;}(React.Component);export{DeckoCards as default};function bookimagecheck(index,books){if(books.items[index].volumeInfo.imageLinks===undefined){return'https://farm8.staticflickr.com/7841/46348541334_ce133cc6f0_o.jpg';}else{return books.items[index].volumeInfo.imageLinks.thumbnail;}}function authorCheck(index,books){if(books.items[index].volumeInfo.authors===undefined){return'';}else{var tempstring=\"\";var authlen=books.items[index].volumeInfo.authors.length;for(var i=0;i<authlen;i++){if(authlen>1){if(i===authlen-1){tempstring=tempstring+books.items[index].volumeInfo.authors[i];}else{tempstring=tempstring+books.items[index].volumeInfo.authors[i]+\", \";}}else{tempstring=tempstring+books.items[index].volumeInfo.authors[i]+\" \";}}return tempstring;}}export var ToastDemo=function ToastDemo(_ref2){var content=_ref2.content,title=_ref2.title,author=_ref2.author,coverurl=_ref2.coverurl,description=_ref2.description;var _useToasts=useToasts(),addToast=_useToasts.addToast;return React.createElement(Button,{onClick:function onClick(){addToast(content,{appearance:'success',autoDismiss:true});addBook(title,author,coverurl,description);}},\"Shelf Book\");};function addBook(name,author,image,description){var addBook=db.collection('Users').doc(login.getUID()).collection('Library').doc(name).set({title:name,author:author,description:description,coverurl:image}).then(function(){console.log(\"Document successfully written!\");}).catch(function(error){console.error(\"Error writing document: \",error);});}","map":{"version":3,"sources":["/Users/john/Downloads/library2/lib/src/components/DeckoCards.js"],"names":["React","useState","Card","CardColumns","Form","Button","axios","firebase","login","ps","useToasts","ToastProvider","Fade","BASE_URL","db","firestore","DeckoCards","handleSubmit","event","console","log","state","value","items","preventDefault","get","result","data","setState","flag","books","volumeInfo","show","descriptioncheck","index","descript","description","length","undefined","substring","user","descriptio","handleChange","bind","target","isloggedOut","content","marginBottom","usercheck","map","setShow","display","flexDirection","width","uniqueId","bookimagecheck","title","authorCheck","Component","imageLinks","thumbnail","authors","tempstring","authlen","i","ToastDemo","author","coverurl","addToast","appearance","autoDismiss","addBook","name","image","collection","doc","getUID","set","then","catch","error"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport Card from 'react-bootstrap/Card';\nimport CardColumns from 'react-bootstrap/CardColumns';\nimport '../stylesheets/DeckoCards.css';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button'\nimport axios from \"axios\";\nimport firebase from '../firebase'\nimport * as login from './Auth/Login.js';\nimport * as ps from './Profile/ProfileSettings.js';\nimport { useToasts, ToastProvider } from 'react-toast-notifications'\nimport Fade from 'react-reveal/Fade';\n\n\nconst BASE_URL = `https://www.googleapis.com/books/v1/volumes`;\nconst db = firebase.firestore();\n\n\nexport default class DeckoCards extends React.Component{\n  constructor() {\n    super();\n    this.state = {\n      value: '',\n      flag: 0,\n      books : [],\n      volumeInfo: [],\n      user: false,\n      descriptio: 'first',\n      show: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({value: event.target.value});\n  }\n\n  usercheck(){\n    if(!ps.isloggedOut()){\n      if(this.state.user === false)\n        this.setState({user: true});\n      return true\n    }\n    return false\n  }\n\n\n  handleSubmit = async (event) =>  {\n    console.log('A name was submitted: ' + this.state.value);\n    const items = '';\n    event.preventDefault();\n    let value = this.state.value;\n    const result = await axios.get(`${BASE_URL}?q=${value}`);\n      console.log(result.data);\n      this.setState({\n        flag: 1,\n        books : result.data,\n        volumeInfo: result.data.items.volumeInfo,\n        show: false\n       })\n  }\n\n  descriptioncheck = (index, books, flag) => {\n    var descript = books.items[index].volumeInfo.description\n    var length = 135;\n    if(descript !== undefined){\n      if(flag !== 'data'){\n      if(descript.length >= length){\n        descript = descript.substring(0, length - 3) + \"...\"\n        //showmore button should go here\n        return (\n        <div>\n          {descript}\n        </div>\n        );\n      }else{\n        return descript;\n      }\n    }else if(flag === 'showmore'){\n      //Showless feature should go here\n      return (\n      <div>\n        {descript}\n      </div>\n      );\n    }else{\n      return descript;\n    }\n  }else{\n    return \"no description available\";\n  }\n  }\n\n    render(){\n      const content = \"Book Added! Find it in your library\"\n      if(this.state.flag === 0 ){\n        return(\n        <Fade>\n        <div className = 'searchBar'>\n        <br className = 'brdeck'></br>\n        <h1 style = {{marginBottom: \"20px\"}}> Librario </h1>\n        <Form inline onSubmit={this.handleSubmit}>\n          <Form.Control\n            className= \"booksearch\" size=\"lg\" type=\"text\"\n            placeholder=\"Search by Book or Author\"\n            value={this.state.value} onChange={this.handleChange}\n            />\n            <Button className = \"submitbtn\" variant=\"secondary\" type=\"submit\" size=\"lg\">\n            Search\n            </Button>\n          </Form>\n          <br className = 'brdeck'></br>\n          <p>.</p>\n          </div>\n          </Fade>\n        );\n      }else if(this.state.user &&  this.usercheck()){\n        return(\n          <div className = 'searchresults'>\n            <Form inline onSubmit={this.handleSubmit}>\n              <br className = 'searched'></br>\n              <Form.Control\n                className= \"booksearch\" size=\"lg\" type=\"text\"\n                placeholder=\"Search by Book or Author\"\n                value={this.state.value} onChange={this.handleChange}\n              />\n              <Button className = \"submitbtn\" variant=\"secondary\" type=\"submit\" size=\"lg\">\n                Submit\n              </Button>\n            </Form>\n            <ul>\n        {this.state.books.items.map((books, index) => {\n          const [show, setShow] = useState(false);\n          return(\n        <div className = 'body'>\n          <CardColumns className = 'deck' style={{display: 'flex', flexDirection: 'row', width: '50rem'}}>\n          <Fade>\n            <Card className = 'imgCarddeck' key={books.uniqueId}>\n              <Card.Img variant=\"top\" src={bookimagecheck(index,this.state.books)} style={{width : '100px'}} />\n            </Card>\n            <Card>\n              <Card.Body>\n              <Card.Title>\n                {this.state.books.items[index].volumeInfo.title}\n              </Card.Title>\n              <Card.Subtitle className=\"mb-2 text-muted\">\n                {authorCheck(index, this.state.books)}\n              </Card.Subtitle>\n              <Card.Text>\n                {this.descriptioncheck(index, this.state.books, false)}\n              </Card.Text>\n              <ToastProvider>\n                <ToastDemo\n                title = {this.state.books.items[index].volumeInfo.title}\n                author = {authorCheck(index, this.state.books)}\n                coverurl = {bookimagecheck(index,this.state.books)}\n                description = {this.descriptioncheck(index, this.state.books, 'data')}\n                content = \"Book Added! find it in your Library\"\n                />\n              </ToastProvider>\n            </Card.Body>\n          </Card>\n          </Fade>\n        </CardColumns>\n      </div>\n    )})}\n    </ul>\n    </div>\n    );\n  }else{\n    return(\n      <div className = 'searchresults'>\n        <Form inline onSubmit={this.handleSubmit}>\n          <br className = 'searched'></br>\n          <Form.Control\n            className= \"booksearch\" size=\"lg\" type=\"text\"\n            placeholder=\"Search by Book or Author\"\n            value={this.state.value} onChange={this.handleChange}\n          />\n          <Button className = \"submitbtn\" variant=\"secondary\" type=\"submit\" size=\"lg\">\n            Submit\n          </Button>\n        </Form>\n        <ul>\n    {this.state.books.items.map((books, index) => {\n      return(\n    <div className = 'body'>\n      <CardColumns className = 'deck' style={{display: 'flex', flexDirection: 'row', width: '50rem'}}>\n      <Fade>\n        <Card className = 'imgCarddeck' key={books.uniqueId}>\n          <Card.Img variant=\"top\" src={bookimagecheck(index,this.state.books)} style={{width : '100px'}} />\n        </Card>\n        <Card>\n          <Card.Body>\n          <Card.Title>\n            {this.state.books.items[index].volumeInfo.title}\n          </Card.Title>\n          <Card.Subtitle className=\"mb-2 text-muted\">\n            {authorCheck(index, this.state.books)}\n          </Card.Subtitle>\n          <Card.Text>\n            {this.descriptioncheck(index, this.state.books, 'first')}\n          </Card.Text>\n              <ToastProvider>\n                <ToastDemo\n                title = {this.state.books.items[index].volumeInfo.title}\n                author = {authorCheck(index, this.state.books)}\n                coverurl = {bookimagecheck(index,this.state.books)}\n                description = {this.descriptioncheck(index, this.state.books, 'data')}\n                content = \"Book Added! find it in your Library\"\n                />\n              </ToastProvider>\n        </Card.Body>\n      </Card>\n      </Fade>\n    </CardColumns>\n  </div>\n)})}\n</ul>\n</div>\n    );\n  }\n  }\n}\n\nfunction bookimagecheck(index, books){\n  if(books.items[index].volumeInfo.imageLinks === undefined){\n    return 'https://farm8.staticflickr.com/7841/46348541334_ce133cc6f0_o.jpg';\n  }else{\n    return books.items[index].volumeInfo.imageLinks.thumbnail;\n  }\n}\n\n\nfunction authorCheck(index, books){\n  if(books.items[index].volumeInfo.authors === undefined){\n    return '';\n  }else{\n    var tempstring = \"\"\n    var authlen = books.items[index].volumeInfo.authors.length;\n    for(var i = 0; i < authlen; i++){\n      if(authlen > 1){\n        if(i === authlen-1){\n          tempstring = tempstring + books.items[index].volumeInfo.authors[i]\n        }else{\n      tempstring = tempstring + books.items[index].volumeInfo.authors[i] + \", \"\n    }\n    }else{\n      tempstring = tempstring + books.items[index].volumeInfo.authors[i] + \" \"\n    }\n    }\n    return tempstring;\n  }\n}\n\nexport const ToastDemo = ({ content, title, author, coverurl, description }) => {\n  const { addToast } = useToasts()\n  return (\n    <Button onClick={() => {addToast(content, {\n      appearance: 'success',\n      autoDismiss: true,\n    });\n    addBook(\n      title,\n      author,\n      coverurl,\n      description\n    );\n  }\n\n  }>\n      Shelf Book\n    </Button>\n  )\n}\n\nfunction addBook(name, author, image, description){\n  var addBook =\n    db.collection('Users').doc(login.getUID())\n    .collection('Library')\n    .doc(name)\n    .set({\n      title: name,\n      author: author,\n      description: description,\n      coverurl: image\n    })\n  .then(function() {\n    console.log(\"Document successfully written!\");\n  })\n  .catch(function(error) {\n    console.error(\"Error writing document: \", error);\n  });\n}\n"]},"metadata":{},"sourceType":"module"}