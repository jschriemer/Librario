{"ast":null,"code":"import _classCallCheck from\"/Users/john/Downloads/library2/lib/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/john/Downloads/library2/lib/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/john/Downloads/library2/lib/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/john/Downloads/library2/lib/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/john/Downloads/library2/lib/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/john/Downloads/library2/lib/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import Card from'react-bootstrap/Card';import CardColumns from'react-bootstrap/CardColumns';import Button from'react-bootstrap/Button';import firebase,{auth,provider}from'../../firebase';import'./Library.css';import OverlayTrigger from'react-bootstrap/OverlayTrigger';import Popover from'react-bootstrap/Popover';import Slide from'react-reveal/Slide';import*as login from'../Auth/Login.js';import Avatar from'react-avatar';import{useToasts,ToastProvider}from'react-toast-notifications';var db=firebase.firestore();var deleteFlag=0;var MobileLibrary=/*#__PURE__*/function(_React$Component){_inherits(MobileLibrary,_React$Component);function MobileLibrary(props){var _this;_classCallCheck(this,MobileLibrary);_this=_possibleConstructorReturn(this,_getPrototypeOf(MobileLibrary).call(this,props));_this.toolTap=function(title,author,description,coverurl){return React.createElement(Popover,{id:\"popover-basic\"},React.createElement(Popover.Title,{as:\"h3\"},title),React.createElement(Popover.Content,null,description,React.createElement(\"br\",null),React.createElement(ToastProvider,null,React.createElement(ToastDemo,{content:\"Book removed!\",title:title,this:_assertThisInitialized(_this)})),React.createElement(Button,{variant:\"info\",onClick:function onClick(){return _this.current(title,author,description,coverurl);},size:\"sm\"},\" Currently Reading\")));};_this.current=function(name,author,description,image){var addBook=db.collection('Users').doc(login.getUID()).collection('CurrentBook').doc(login.getUID()).set({title:name,author:author,description:description,coverurl:image}).then(function(){console.log(\"Document successfully written!\");}).catch(function(error){console.error(\"Error writing document: \",error);});};_this.state={bookcount:0,data:'',delete:false,show:false,setShow:false,current:\"\"};return _this;}_createClass(MobileLibrary,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;db.collection(\"Users\").doc(login.getUID()).collection(\"Library\").get().then(function(querySnapshot){var data=querySnapshot.docs.map(function(doc){return doc.data();});_this2.setState({bookcount:data.length,data:data});});}},{key:\"getBooks\",value:function getBooks(){db.collection(\"Library\").get().then(function(querySnapshot){var data=querySnapshot.docs.map(function(doc){return doc.data();});return data;});}},{key:\"setShow\",value:function setShow(show){this.setState({show:!show});}},{key:\"render\",value:function render(){var _this3=this;if(deleteFlag===1){console.log(\"# \"+this.state.bookcount+\" #\"+this.state.delete);console.log(deleteFlag+\" YES \");this.setState({delete:!this.state.delete,bookcount:this.state.bookcount-1});deleteFlag=0;}db.collection('Users').doc(login.getUID()).collection('CurrentBook').get().then(function(querySnapshot){var currentdata=querySnapshot.docs.map(function(doc){return doc.data();});_this3.setState({current:currentdata[0]});});if(this.state.bookcount>0){if(this.state.current!==undefined){return React.createElement(\"div\",null,React.createElement(CardColumns,{className:\"postlarge\"},React.createElement(Card,{className:\"currentRead\"},React.createElement(Avatar,{className:\"ava\",name:login.getUser(),round:true,style:{marginBottom:\"20px\"}}),React.createElement(Card.Title,null,\"You are reading\"),React.createElement(Card.Subtitle,null,this.state.current.title,\" by \",this.state.current.author),React.createElement(Card.Img,{style:{width:'100px'},src:this.state.current.coverurl})),this.state.data.map(function(data,index){return React.createElement(\"div\",{key:index.toString()},React.createElement(Slide,{bottom:true},React.createElement(Card,{className:\"imgCardlib\",key:data.uniqueId},React.createElement(OverlayTrigger,{trigger:\"click\",placement:\"bottom\",overlay:_this3.toolTap(data.title,data.author,data.description,data.coverurl)},React.createElement(Card.Img,{\"data-tip\":true,\"data-for\":\"clickme\",\"data-event\":\"click\",variant:\"top\",src:data.coverurl,style:{width:'10em',marginBottom:'30px',paddingRight:'0px'}})))));})));}else{var deleted=this.state.delete;return React.createElement(\"div\",{className:\"library\"},React.createElement(\"h1\",{style:{color:\"white\"}},this.state.fname,\"'s Library \"),React.createElement(CardColumns,{className:\"post\"},React.createElement(Card,{className:\"currentRead\"},React.createElement(Avatar,{style:{marginBottom:'30px'},className:\"ava\",name:this.state.fname,round:true}),React.createElement(Card.Title,null,this.state.fname,\" is not reading anything!\")),this.state.data.map(function(data,index){return React.createElement(\"div\",null,React.createElement(Slide,{bottom:true},React.createElement(Card,{className:\"imgCardlib\",key:data.uniqueId},React.createElement(OverlayTrigger,{trigger:\"click\",placement:\"bottom\",overlay:_this3.toolTap(data.title,data.author,data.description,data.coverurl)},React.createElement(Card.Img,{\"data-tip\":true,\"data-for\":\"clickme\",\"data-event\":\"click\",variant:\"top\",src:data.coverurl,style:{width:'10em',marginBottom:'30px',paddingRight:'0px'}})))));})));}}else{return React.createElement(\"div\",{className:\"emptylibrary\"},React.createElement(\"p\",{style:{color:\"white\",fontSize:\"28px\",height:'85.7vh'}},\"No books in your library.\"));}}}]);return MobileLibrary;}(React.Component);export{MobileLibrary as default};function bookimagecheck(index,books){if(books.items[index].volumeInfo.imageLinks===undefined){console.log(\"undefined image! @ \"+books.items[index]);return'../images/cannotfind.png';}else{return books.items[index].volumeInfo.imageLinks.thumbnail;}}function descriptioncheck(index,books){var descript=books.items[index].volumeInfo.description;var length=135;if(descript!==undefined){if(descript.length>=length){descript=descript.substring(0,length-3)+\"...\";return descript;}else{return descript;}}else{return\"no description available\";}}function authorCheck(index,books){console.log(books.items[index].volumeInfo.authors);if(books.items[index].volumeInfo.authors===undefined){return'';}else{var tempstring=\"\";var authlen=books.items[index].volumeInfo.authors.length;for(var i=0;i<authlen;i++){if(authlen>1){if(i===authlen-1){tempstring=tempstring+books.items[index].volumeInfo.authors[i];}else{tempstring=tempstring+books.items[index].volumeInfo.authors[i]+\", \";}}else{tempstring=tempstring+books.items[index].volumeInfo.authors[i]+\" \";}}return tempstring;}}export var ToastDemo=function ToastDemo(_ref){var content=_ref.content,title=_ref.title;var _useToasts=useToasts(),addToast=_useToasts.addToast;return React.createElement(Button,{onClick:function onClick(){addToast(content,{appearance:'error',autoDismiss:true});handleRemoveBook(title);}},\"Remove Book\");};function handleRemoveBook(name){db.collection('Users').doc(login.getUID()).collection('Library').doc(name).delete().then(function(){console.log(\"Book deleted\");deleteFlag=1;}).catch(function(error){console.error(\"Error deleting document: \",error);});}","map":{"version":3,"sources":["/Users/john/Downloads/library2/lib/src/components/Library/desktopLibrary.js"],"names":["React","Card","CardColumns","Button","firebase","auth","provider","OverlayTrigger","Popover","Slide","login","Avatar","useToasts","ToastProvider","db","firestore","deleteFlag","MobileLibrary","props","toolTap","title","author","description","coverurl","current","name","image","addBook","collection","doc","getUID","set","then","console","log","catch","error","state","bookcount","data","delete","show","setShow","get","querySnapshot","docs","map","setState","length","currentdata","undefined","getUser","marginBottom","width","index","toString","uniqueId","paddingRight","deleted","color","fname","fontSize","height","Component","bookimagecheck","books","items","volumeInfo","imageLinks","thumbnail","descriptioncheck","descript","substring","authorCheck","authors","tempstring","authlen","i","ToastDemo","content","addToast","appearance","autoDismiss","handleRemoveBook"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Card from 'react-bootstrap/Card';\nimport CardColumns from 'react-bootstrap/CardColumns';\nimport Button from 'react-bootstrap/Button'\nimport firebase, {auth, provider} from '../../firebase'\nimport './Library.css';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Popover from 'react-bootstrap/Popover';\nimport Slide from 'react-reveal/Slide';\nimport * as login from '../Auth/Login.js';\nimport Avatar from 'react-avatar';\nimport { useToasts, ToastProvider } from 'react-toast-notifications'\n\nconst db = firebase.firestore();\nvar deleteFlag = 0;\n\nexport default class MobileLibrary extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {\n      bookcount: 0,\n      data: '',\n      delete: false,\n      show: false,\n      setShow: false,\n      current: \"\"\n    }\n  }\n\n  componentDidMount() {\n    db.collection(\"Users\")\n    .doc(login.getUID()).collection(\"Library\")\n      .get()\n      .then(querySnapshot => {\n        const data = querySnapshot.docs.map(doc => doc.data());\n        this.setState({\n          bookcount: data.length,\n          data:data\n         });\n      });\n  }\n\n\n   getBooks(){\n     db.collection(\"Library\")\n     .get()\n     .then(querySnapshot => {\n    const data = querySnapshot.docs.map(doc => doc.data());\n    return data;\n    });\n   }\n\n   toolTap = (title, author, description, coverurl) => {\n     return(\n       <Popover id=\"popover-basic\">\n       <Popover.Title as=\"h3\">{title}</Popover.Title>\n       <Popover.Content>\n         {description}\n         <br></br>\n         <ToastProvider>\n           <ToastDemo\n           content = \"Book removed!\"\n           title = {title}\n           this = {this}\n           />\n         </ToastProvider>\n\n         <Button variant=\"info\" onClick = { () =>\n           this.current(\n             title,\n             author,\n             description,\n             coverurl\n           )\n         } size=\"sm\"> Currently Reading</Button>\n       </Popover.Content>\n     </Popover>)\n   }\n\n   setShow(show){\n     this.setState({\n       show: !show\n     })\n   }\n\n   current = (name, author, description, image) => {\n     var addBook =\n       db.collection('Users').doc(login.getUID())\n       .collection('CurrentBook')\n       .doc(login.getUID())\n       .set({\n         title: name,\n         author: author,\n         description: description,\n         coverurl: image\n       })\n     .then(function() {\n       console.log(\"Document successfully written!\");\n     })\n     .catch(function(error) {\n       console.error(\"Error writing document: \", error);\n     });\n   }\n\n\n   render(){\n\n     if(deleteFlag === 1){\n           console.log(\"# \" + this.state.bookcount + \" #\" + this.state.delete)\n           console.log(deleteFlag + \" YES \")\n           this.setState({\n             delete: !this.state.delete,\n             bookcount: this.state.bookcount - 1\n           })\n           deleteFlag = 0;\n         }\n\n         db.collection('Users').doc(login.getUID())\n         .collection('CurrentBook')\n         .get()\n         .then(querySnapshot => {\n         var currentdata = querySnapshot.docs.map(doc => doc.data());\n         this.setState({\n           current: currentdata[0]\n         })\n        });\n\n\n     if(this.state.bookcount > 0){\n      if(this.state.current !== undefined){\n     return(\n       <div>\n       <CardColumns className = 'postlarge'>\n         <Card className = 'currentRead'>\n           <Avatar className = \"ava\" name={login.getUser()} round={true} style = {{marginBottom: \"20px\"}}/>\n           <Card.Title>You are reading</Card.Title>\n           <Card.Subtitle>{this.state.current.title} by {this.state.current.author}</Card.Subtitle>\n           <Card.Img style={{width : '100px'}} src={this.state.current.coverurl}></Card.Img>\n         </Card>\n         {this.state.data.map((data, index) => {\n           return(\n             <div key={index.toString()}>\n               <Slide bottom>\n                 <Card className = 'imgCardlib' key={data.uniqueId}>\n                   <OverlayTrigger trigger=\"click\" placement=\"bottom\" overlay={this.toolTap(data.title, data.author, data.description, data.coverurl)}>\n                     <Card.Img data-tip data-for='clickme' data-event='click' variant=\"top\" src={data.coverurl} style = {{width: '10em', marginBottom: '30px', paddingRight: '0px'}} />\n                   </OverlayTrigger>\n                 </Card>\n               </Slide>\n             </div>\n           )\n         })}\n         </CardColumns>\n       </div>\n     );\n   }else{\n       var deleted = this.state.delete;\n       return(\n         <div className = 'library'>\n         <h1 style = {{color: \"white\"}}>{this.state.fname}'s Library </h1>\n           <CardColumns className = 'post'>\n           <Card className = 'currentRead'>\n           <Avatar style = {{marginBottom: '30px'}} className = \"ava\" name={this.state.fname} round={true}/>\n             <Card.Title>{this.state.fname} is not reading anything!</Card.Title>\n           </Card>\n       {this.state.data.map((data, index) => {\n        return(\n          <div>\n           <Slide bottom>\n           <Card className = 'imgCardlib' key={data.uniqueId}>\n           <OverlayTrigger trigger=\"click\" placement=\"bottom\" overlay={this.toolTap(data.title, data.author, data.description, data.coverurl)}>\n             <Card.Img data-tip data-for='clickme' data-event='click' variant=\"top\" src={data.coverurl} style = {{width: '10em', marginBottom: '30px', paddingRight: '0px'}} />\n             </OverlayTrigger>\n           </Card>\n           </Slide>\n         </div>\n   );})}\n     </CardColumns>\n     </div>\n   );\n   }\n   }else{\n     return(\n         <div className = 'emptylibrary'>\n         <p style = {{color: \"white\", fontSize: \"28px\", height: '85.7vh'}}>No books in your library.</p>\n         </div>\n       );\n     }\n   }\n }\n\n\nfunction bookimagecheck(index, books){\n  if(books.items[index].volumeInfo.imageLinks === undefined){\n    console.log(\"undefined image! @ \" + books.items[index]);\n    return '../images/cannotfind.png';\n  }else{\n    return books.items[index].volumeInfo.imageLinks.thumbnail;\n  }\n}\n\nfunction descriptioncheck(index, books){\n  var descript = books.items[index].volumeInfo.description\n  var length = 135;\n  if(descript !== undefined){\n    if(descript.length >= length){\n      descript = descript.substring(0, length - 3) + \"...\"\n      return descript;\n    }else{\n      return descript;\n  }\n}else{\n  return \"no description available\";\n}\n}\n\nfunction authorCheck(index, books){\n  console.log(books.items[index].volumeInfo.authors)\n  if(books.items[index].volumeInfo.authors === undefined){\n    return '';\n  }else{\n    var tempstring = \"\"\n    var authlen = books.items[index].volumeInfo.authors.length;\n    for(var i = 0; i < authlen; i++){\n      if(authlen > 1){\n        if(i === authlen-1){\n          tempstring = tempstring + books.items[index].volumeInfo.authors[i]\n        }else{\n      tempstring = tempstring + books.items[index].volumeInfo.authors[i] + \", \"\n    }\n    }else{\n      tempstring = tempstring + books.items[index].volumeInfo.authors[i] + \" \"\n    }\n    }\n    return tempstring;\n  }\n}\n\nexport const ToastDemo = ({ content, title}) => {\n  const { addToast } = useToasts()\n  return (\n    <Button onClick={() => {addToast(content, {\n      appearance: 'error',\n      autoDismiss: true,\n      });\n      handleRemoveBook(\n        title\n      );\n    }\n  }>\n  Remove Book\n  </Button>\n  )\n}\n\nfunction handleRemoveBook(name){\n  db.collection('Users').doc(login.getUID())\n  .collection('Library')\n  .doc(name)\n  .delete()\n  .then(function() {\n    console.log(\"Book deleted\");\n    deleteFlag = 1;\n\n })\n  .catch(function(error) {\n    console.error(\"Error deleting document: \", error);\n  });\n}\n"]},"metadata":{},"sourceType":"module"}