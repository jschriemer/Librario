{"ast":null,"code":"var _jsxFileName = \"/Users/john/Downloads/library2/lib/src/components/Library/FriendsLibrary.js\";\nimport React from 'react';\nimport Card from 'react-bootstrap/Card';\nimport CardColumns from 'react-bootstrap/CardColumns';\nimport Button from 'react-bootstrap/Button';\nimport firebase from '../../firebase';\nimport './Library.css';\nimport ReactLoading from 'react-loading';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Popover from 'react-bootstrap/Popover';\nimport Slide from 'react-reveal/Slide';\nimport * as login from '../Auth/Login.js';\nimport Avatar from 'react-avatar';\nconst BASE_URL = `https://www.googleapis.com/books/v1/volumes`;\nconst db = firebase.firestore(); //if bookcount > 0 then display cards otherwise display \"you have no books here. Search for your favourites and add the to your library!\"\n\nexport default class Library extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.addBook = (name, author, image, description) => {\n      var addBook = db.collection('Users').doc(login.getUID()).collection('Library').doc(name).set({\n        title: name,\n        author: author,\n        description: description,\n        coverurl: image\n      }).then(function () {\n        console.log(\"Document successfully written!\");\n      }).catch(function (error) {\n        console.error(\"Error writing document: \", error);\n      });\n    };\n\n    this.toolTap = (title, author, description, image) => {\n      return React.createElement(Popover, {\n        id: \"popover-basic\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(Popover.Title, {\n        as: \"h3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, title), React.createElement(Popover.Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, description, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }), React.createElement(Button, {\n        variant: \"secondary\",\n        type: \"submit\",\n        onClick: () => {\n          this.addBook(title, author, description, image);\n        },\n        size: \"sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, \"Shelf\")));\n    };\n\n    this.handleRemoveBook = name => {\n      var docRef = db.collection(\"Library\").doc(name).delete().then(function () {\n        alert(\"Document deleted\");\n        window.location.reload();\n      }).catch(function (error) {\n        console.error(\"Error deleting document: \", error);\n      });\n    };\n\n    this.current = (name, author, description, image) => {\n      const {\n        friendUid\n      } = this.props.location.state;\n      var addBook = db.collection(\"Users\").doc(friendUid).collection(\"Library\").get().then(querySnapshot => {\n        const data = querySnapshot.docs.map(doc => doc.data());\n        console.log(\"friends data: \" + data);\n        this.setState({\n          current: data\n        });\n        this.handleRemoveBook = this.handleRemoveBook.bind(this);\n      });\n    };\n\n    this.state = {\n      bookcount: 0,\n      data: '',\n      delete: false,\n      show: false,\n      setShow: false,\n      current: \"\",\n      fname: \"\"\n    };\n  }\n\n  componentDidMount() {\n    const {\n      friendUid,\n      friendName\n    } = this.props.location.state;\n    this.setState({\n      fname: friendName\n    });\n    console.log(\"friends uid: \" + friendUid + \" \" + friendName);\n    db.collection(\"Users\").doc(friendUid).collection(\"Library\").get().then(querySnapshot => {\n      const data = querySnapshot.docs.map(doc => doc.data());\n      console.log(\"friends data: \" + data);\n      this.setState({\n        bookcount: data.length,\n        data: data\n      });\n      this.handleRemoveBook = this.handleRemoveBook.bind(this);\n    });\n  }\n\n  getBooks() {\n    db.collection(\"Library\").get().then(querySnapshot => {\n      const data = querySnapshot.docs.map(doc => doc.data());\n      return data;\n    });\n  }\n\n  setShow(show) {\n    this.setState({\n      show: !show\n    });\n  }\n\n  render() {\n    const xxx = \" \";\n    const {\n      friendUid\n    } = this.props.location.state;\n    db.collection('Users').doc(friendUid).get().then(querySnapshot => {//var cata = querySnapshot.docs.map(doc => doc.data());\n      //  console.log(cata);\n    });\n    db.collection('Users').doc(friendUid).collection('CurrentBook').get().then(querySnapshot => {\n      var currentdata = querySnapshot.docs.map(doc => doc.data());\n      this.setState({\n        current: currentdata[0]\n      });\n    });\n\n    if (this.state.bookcount > 0) {\n      if (this.state.current !== undefined) {\n        var deleted = this.state.delete;\n        return React.createElement(\"div\", {\n          className: \"library\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          style: {\n            color: \"white\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162\n          },\n          __self: this\n        }, this.state.fname, \"'s Library \"), React.createElement(CardColumns, {\n          className: \"post\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163\n          },\n          __self: this\n        }, React.createElement(Card, {\n          className: \"currentRead\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164\n          },\n          __self: this\n        }, React.createElement(Avatar, {\n          className: \"ava\",\n          name: this.state.fname,\n          round: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165\n          },\n          __self: this\n        }), React.createElement(Card.Title, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166\n          },\n          __self: this\n        }, this.state.fname, \" is reading\"), React.createElement(Card.Subtitle, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167\n          },\n          __self: this\n        }, this.state.current.title, \" by \", this.state.current.author), React.createElement(Card.Img, {\n          style: {\n            width: '100px'\n          },\n          src: this.state.current.coverurl,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168\n          },\n          __self: this\n        })), this.state.data.map((data, index) => {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 172\n            },\n            __self: this\n          }, React.createElement(Slide, {\n            bottom: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 173\n            },\n            __self: this\n          }, React.createElement(Card, {\n            className: \"imgCardlib\",\n            key: data.uniqueId,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 174\n            },\n            __self: this\n          }, React.createElement(OverlayTrigger, {\n            trigger: \"click\",\n            placement: \"bottom\",\n            overlay: this.toolTap(data.title, data.author, data.description, data.coverurl),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 175\n            },\n            __self: this\n          }, React.createElement(Card.Img, {\n            \"data-tip\": true,\n            \"data-for\": \"clickme\",\n            \"data-event\": \"click\",\n            variant: \"top\",\n            src: data.coverurl,\n            style: {\n              width: '10em',\n              marginBottom: '30px',\n              paddingRight: '0px'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 176\n            },\n            __self: this\n          })))));\n        })));\n      } else {\n        var deleted = this.state.delete;\n        return React.createElement(\"div\", {\n          className: \"library\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          style: {\n            color: \"white\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189\n          },\n          __self: this\n        }, this.state.fname, \"'s Library \"), React.createElement(CardColumns, {\n          className: \"post\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 190\n          },\n          __self: this\n        }, React.createElement(Card, {\n          className: \"currentRead\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191\n          },\n          __self: this\n        }, React.createElement(Avatar, {\n          style: {\n            marginBottom: '30px'\n          },\n          className: \"ava\",\n          name: this.state.fname,\n          round: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192\n          },\n          __self: this\n        }), React.createElement(Card.Title, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193\n          },\n          __self: this\n        }, this.state.fname, \" is not reading anything!\")), this.state.data.map((data, index) => {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 197\n            },\n            __self: this\n          }, React.createElement(Slide, {\n            bottom: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 198\n            },\n            __self: this\n          }, React.createElement(Card, {\n            className: \"imgCardlib\",\n            key: data.uniqueId,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 199\n            },\n            __self: this\n          }, React.createElement(OverlayTrigger, {\n            trigger: \"click\",\n            placement: \"bottom\",\n            overlay: this.toolTap(data.title, data.author, data.description, data.coverurl),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 200\n            },\n            __self: this\n          }, React.createElement(Card.Img, {\n            \"data-tip\": true,\n            \"data-for\": \"clickme\",\n            \"data-event\": \"click\",\n            variant: \"top\",\n            src: data.coverurl,\n            style: {\n              width: '10em',\n              marginBottom: '30px',\n              paddingRight: '0px'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 201\n            },\n            __self: this\n          })))));\n        })));\n      }\n    }\n\n    return React.createElement(\"div\", {\n      className: \"emptylibrary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"loading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, React.createElement(ReactLoading, {\n      type: \"cubes\",\n      height: \"100vh\",\n      color: \"white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    })));\n  }\n\n}\n\nfunction bookimagecheck(index, books) {\n  if (books.items[index].volumeInfo.imageLinks === undefined) {\n    console.log(\"undefined image! @ \" + books.items[index]);\n    return '../images/cannotfind.png';\n  } else {\n    return books.items[index].volumeInfo.imageLinks.thumbnail;\n  }\n}\n\nfunction descriptioncheck(index, books) {\n  var descript = books.items[index].volumeInfo.description;\n  var length = 135;\n\n  if (descript !== undefined) {\n    if (descript.length >= length) {\n      descript = descript.substring(0, length - 3) + \"...\";\n      return descript;\n    } else {\n      return descript;\n    }\n  } else {\n    return \"no description available\";\n  }\n}\n\nfunction authorCheck(index, books) {\n  console.log(books.items[index].volumeInfo.authors);\n\n  if (books.items[index].volumeInfo.authors === undefined) {\n    return '';\n  } else {\n    var tempstring = \"\";\n    var authlen = books.items[index].volumeInfo.authors.length;\n\n    for (var i = 0; i < authlen; i++) {\n      if (authlen > 1) {\n        if (i === authlen - 1) {\n          tempstring = tempstring + books.items[index].volumeInfo.authors[i];\n        } else {\n          tempstring = tempstring + books.items[index].volumeInfo.authors[i] + \", \";\n        }\n      } else {\n        tempstring = tempstring + books.items[index].volumeInfo.authors[i] + \" \";\n      }\n    }\n\n    return tempstring;\n  }\n}","map":{"version":3,"sources":["/Users/john/Downloads/library2/lib/src/components/Library/FriendsLibrary.js"],"names":["React","Card","CardColumns","Button","firebase","ReactLoading","OverlayTrigger","Popover","Slide","login","Avatar","BASE_URL","db","firestore","Library","Component","constructor","props","addBook","name","author","image","description","collection","doc","getUID","set","title","coverurl","then","console","log","catch","error","toolTap","handleRemoveBook","docRef","delete","alert","window","location","reload","current","friendUid","state","get","querySnapshot","data","docs","map","setState","bind","bookcount","show","setShow","fname","componentDidMount","friendName","length","getBooks","render","xxx","currentdata","undefined","deleted","color","width","index","uniqueId","marginBottom","paddingRight","bookimagecheck","books","items","volumeInfo","imageLinks","thumbnail","descriptioncheck","descript","substring","authorCheck","authors","tempstring","authlen","i"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Card from 'react-bootstrap/Card';\nimport CardColumns from 'react-bootstrap/CardColumns';\nimport Button from 'react-bootstrap/Button'\nimport firebase from '../../firebase'\nimport './Library.css';\nimport ReactLoading from 'react-loading';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Popover from 'react-bootstrap/Popover';\nimport Slide from 'react-reveal/Slide';\nimport * as login from '../Auth/Login.js';\nimport Avatar from 'react-avatar';\n\n\nconst BASE_URL = `https://www.googleapis.com/books/v1/volumes`;\nconst db = firebase.firestore();\n\n\n //if bookcount > 0 then display cards otherwise display \"you have no books here. Search for your favourites and add the to your library!\"\nexport default class Library extends React.Component{\nconstructor(props){\n  super(props);\n  this.state = {\n    bookcount: 0,\n    data: '',\n    delete: false,\n    show: false,\n    setShow: false,\n    current: \"\",\n    fname: \"\"\n}\n}\n\ncomponentDidMount() {\n  const { friendUid, friendName } = this.props.location.state;\n  this.setState({\n    fname: friendName\n  })\n  console.log(\"friends uid: \" + friendUid + \" \" + friendName)\n  db.collection(\"Users\")\n  .doc(friendUid).collection(\"Library\")\n    .get()\n    .then(querySnapshot => {\n      const data = querySnapshot.docs.map(doc => doc.data());\n      console.log(\"friends data: \" + data)\n      this.setState({\n        bookcount: data.length,\n        data:data\n       });\n       this.handleRemoveBook = this.handleRemoveBook.bind(this)\n    });\n}\naddBook = (name, author, image, description) => {\n  var addBook =\ndb.collection('Users').doc(login.getUID())\n.collection('Library')\n.doc(name)\n.set({\n  title: name,\n  author: author,\n  description: description,\n  coverurl: image\n})\n.then(function() {\nconsole.log(\"Document successfully written!\");\n})\n.catch(function(error) {\nconsole.error(\"Error writing document: \", error);\n});\n}\n\n\n getBooks(){\n   db.collection(\"Library\")\n   .get()\n   .then(querySnapshot => {\n  const data = querySnapshot.docs.map(doc => doc.data());\n  return data;\n  });\n }\n\n toolTap = (title, author, description, image) => {\n   return(\n     <Popover id=\"popover-basic\">\n     <Popover.Title as=\"h3\">{title}</Popover.Title>\n     <Popover.Content>\n       {description}\n       <br></br>\n       <Button variant=\"secondary\" type=\"submit\" onClick = { () =>\n         {this.addBook(\n           title,\n           author,\n           description,\n           image\n         )\n       }} size=\"sm\">Shelf</Button>\n     </Popover.Content>\n   </Popover>)\n }\n\n handleRemoveBook = (name) => {\n   var docRef = db.\n   collection(\"Library\")\n   .doc(name)\n   .delete()\n   .then(function() {\n     alert(\"Document deleted\");\n     window.location.reload();\n  })\n   .catch(function(error) {\n     console.error(\"Error deleting document: \", error);\n   });\n }\n\n setShow(show){\n   this.setState({\n     show: !show\n   })\n }\n\n current = (name, author, description, image) => {\n   const { friendUid } = this.props.location.state;\n   var addBook =\n   db.collection(\"Users\")\n   .doc(friendUid).collection(\"Library\")\n     .get()\n     .then(querySnapshot => {\n       const data = querySnapshot.docs.map(doc => doc.data());\n       console.log(\"friends data: \" + data)\n       this.setState({\n         current:data\n        });\n        this.handleRemoveBook = this.handleRemoveBook.bind(this)\n     });\n }\n\n\n\n    render(){\n      const xxx = \" \";\n      const { friendUid } = this.props.location.state;\n      db.collection('Users').doc(friendUid).get()\n      .then(querySnapshot => {\n      //var cata = querySnapshot.docs.map(doc => doc.data());\n    //  console.log(cata);\n     });\n\n      db.collection('Users').doc(friendUid)\n      .collection('CurrentBook')\n      .get()\n      .then(querySnapshot => {\n      var currentdata = querySnapshot.docs.map(doc => doc.data());\n      this.setState({\n        current: currentdata[0]\n      })\n     });\n      if(this.state.bookcount > 0){\n        if(this.state.current !== undefined){\n        var deleted = this.state.delete;\n        return(\n          <div className = 'library'>\n          <h1 style = {{color: \"white\"}}>{this.state.fname}'s Library </h1> \n            <CardColumns className = 'post'>\n            <Card className = 'currentRead'>\n            <Avatar className = \"ava\" name={this.state.fname} round={true}/>\n              <Card.Title>{this.state.fname} is reading</Card.Title>\n              <Card.Subtitle>{this.state.current.title} by {this.state.current.author}</Card.Subtitle>\n              <Card.Img style={{width : '100px'}} src={this.state.current.coverurl}></Card.Img>\n            </Card>\n        {this.state.data.map((data, index) => {\n         return(\n           <div>\n            <Slide bottom>\n            <Card className = 'imgCardlib' key={data.uniqueId}>\n            <OverlayTrigger trigger=\"click\" placement=\"bottom\" overlay={this.toolTap(data.title, data.author, data.description, data.coverurl)}>\n              <Card.Img data-tip data-for='clickme' data-event='click' variant=\"top\" src={data.coverurl} style = {{width: '10em', marginBottom: '30px', paddingRight: '0px'}} />\n              </OverlayTrigger>\n            </Card>\n            </Slide>\n          </div>\n    );})}\n      </CardColumns>\n      </div>\n    );\n  }else{\n    var deleted = this.state.delete;\n    return(\n      <div className = 'library'>\n      <h1 style = {{color: \"white\"}}>{this.state.fname}'s Library </h1>\n        <CardColumns className = 'post'>\n        <Card className = 'currentRead'>\n        <Avatar style = {{marginBottom: '30px'}} className = \"ava\" name={this.state.fname} round={true}/>\n          <Card.Title>{this.state.fname} is not reading anything!</Card.Title>\n        </Card>\n    {this.state.data.map((data, index) => {\n     return(\n       <div>\n        <Slide bottom>\n        <Card className = 'imgCardlib' key={data.uniqueId}>\n        <OverlayTrigger trigger=\"click\" placement=\"bottom\" overlay={this.toolTap(data.title, data.author, data.description, data.coverurl)}>\n          <Card.Img data-tip data-for='clickme' data-event='click' variant=\"top\" src={data.coverurl} style = {{width: '10em', marginBottom: '30px', paddingRight: '0px'}} />\n          </OverlayTrigger>\n        </Card>\n        </Slide>\n      </div>\n);})}\n  </CardColumns>\n  </div>\n);\n  }\n    }\n    return(\n      <div className = 'emptylibrary'>\n      {/*<p style = {{color: \"white\", fontSize: \"28px\", height: '85.7vh'}}>No books in your library.</p>*/}\n      <div className = 'loading'>\n        <ReactLoading type='cubes' height = '100vh' color='white' />\n      </div>\n      </div>\n    );\n  }\n  }\n\nfunction bookimagecheck(index, books){\n  if(books.items[index].volumeInfo.imageLinks === undefined){\n    console.log(\"undefined image! @ \" + books.items[index]);\n    return '../images/cannotfind.png';\n  }else{\n    return books.items[index].volumeInfo.imageLinks.thumbnail;\n  }\n}\n\nfunction descriptioncheck(index, books){\n  var descript = books.items[index].volumeInfo.description\n  var length = 135;\n  if(descript !== undefined){\n    if(descript.length >= length){\n      descript = descript.substring(0, length - 3) + \"...\"\n      return descript;\n    }else{\n      return descript;\n  }\n}else{\n  return \"no description available\";\n}\n}\n\nfunction authorCheck(index, books){\n  console.log(books.items[index].volumeInfo.authors)\n  if(books.items[index].volumeInfo.authors === undefined){\n    return '';\n  }else{\n    var tempstring = \"\"\n    var authlen = books.items[index].volumeInfo.authors.length;\n    for(var i = 0; i < authlen; i++){\n      if(authlen > 1){\n        if(i === authlen-1){\n          tempstring = tempstring + books.items[index].volumeInfo.authors[i]\n        }else{\n      tempstring = tempstring + books.items[index].volumeInfo.authors[i] + \", \"\n    }\n    }else{\n      tempstring = tempstring + books.items[index].volumeInfo.authors[i] + \" \"\n    }\n    }\n    return tempstring;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}