{"ast":null,"code":"import _regeneratorRuntime from\"/Users/john/Downloads/library2/lib/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/john/Downloads/library2/lib/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/john/Downloads/library2/lib/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/john/Downloads/library2/lib/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/john/Downloads/library2/lib/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/john/Downloads/library2/lib/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/john/Downloads/library2/lib/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/john/Downloads/library2/lib/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import Avatar from'react-avatar';import Card from'react-bootstrap/Card';import Button from'react-bootstrap/Button';import'./Profile.css';import Form from'react-bootstrap/Form';import Fade from'react-reveal/Fade';import firebase from'../../firebase';import*as login from'../Auth/Login.js';import{useToasts,ToastProvider}from'react-toast-notifications';var db=firebase.firestore();var userList=[];var Friends=/*#__PURE__*/function(_React$Component){_inherits(Friends,_React$Component);function Friends(){var _this;_classCallCheck(this,Friends);_this=_possibleConstructorReturn(this,_getPrototypeOf(Friends).call(this));_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var value,name;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();value=_this.state.value;userList=[];name='';db.collection(\"Users\").get().then(function(querySnapshot){if(querySnapshot.empty){console.log('No matching documents.');return;}var data=querySnapshot.docs.map(function(doc){return doc.data();});console.log(data);for(var i in data){if(value===data[i].name||value===data[i].fullname||value===data[i].fullname.toLowerCase()||value===data[i].name.toLowerCase()){userList.push(data[i]);name=data[i].fullname;_this.setState({flag:1,usersList:userList});}}});case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={value:'',flag:0,books:[],volumeInfo:[],user:false,descriptio:'first',usersList:[]};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(Friends,[{key:\"handleChange\",value:function handleChange(event){this.setState({value:event.target.value});}},{key:\"render\",value:function render(){if(this.state.flag===0){return React.createElement(\"div\",{style:{height:'100vh'},className:\"FriendsPage\"},React.createElement(Fade,null,React.createElement(\"div\",{className:\"friendSearchBar\"},React.createElement(Form,{inline:true,onSubmit:this.handleSubmit},React.createElement(Form.Control,{className:\"friendSearch\",size:\"lg\",type:\"text\",placeholder:\"Search for a friend!\",value:this.state.value,onChange:this.handleChange}),React.createElement(Button,{className:\"submitbtn\",variant:\"secondary\",type:\"submit\",size:\"lg\"},\"Search\")),React.createElement(\"br\",{className:\"brdeck\"}),React.createElement(\"p\",null,\".\"))));}else{console.log(userList);return React.createElement(\"div\",{style:{minHeight:'100vh'},className:\"FriendsPage\"},React.createElement(\"div\",{className:\"friendSearchBar\"},React.createElement(Form,{inline:true,onSubmit:this.handleSubmit},React.createElement(Form.Control,{className:\"friendSearch\",size:\"lg\",type:\"text\",placeholder:\"Search for amnother friend!\",value:this.state.value,onChange:this.handleChange}),React.createElement(Button,{className:\"submitbtn\",variant:\"secondary\",type:\"submit\",size:\"lg\"},\"Search\")),React.createElement(\"br\",null)),React.createElement(\"p\",null,\".\"),React.createElement(\"ul\",null,this.state.usersList.map(function(item,key){var uid=db.collection('Users').doc();console.log(login.getUID());db.collection(\"Users\").doc(login.getUID()).collection('Library').get().then(function(querySnapshot){var data=querySnapshot.docs.map(function(doc){return doc.data();});console.log(data);});return React.createElement(\"div\",null,React.createElement(Avatar,{className:\"friendAva\",name:item.fullname,round:true}),React.createElement(Card,{className:\"searchFriend\",style:{padding:'10px'}},React.createElement(Card.Title,null,item.fullname),React.createElement(Card.Subtitle,{className:\"mb-2 text-muted\"},item.name),React.createElement(ToastProvider,null,React.createElement(ToastDemo,{fullname:item.fullname,name:item.name,uid:item.uid,content:\"Friend Added!\"}))));})));}}}]);return Friends;}(React.Component);export{Friends as default};export var ToastDemo=function ToastDemo(_ref2){var content=_ref2.content,fullname=_ref2.fullname,name=_ref2.name,uid=_ref2.uid;var _useToasts=useToasts(),addToast=_useToasts.addToast;return React.createElement(Button,{className:\"friendbtn\",onClick:function onClick(){addToast(content,{appearance:'success',autoDismiss:true});addFriend(fullname,name,uid);}},\"Add Friend\");};function addFriend(fullname,name,uid){console.log(\"friend name \"+name);var addFriend=db.collection('Users').doc(login.getUID()).collection('Friends').doc(fullname).set({fullname:fullname,username:name,uid:uid}).then(function(){console.log(\"Friend Added!\");}).catch(function(error){console.error(\"Error adding friend document: \",error);});}","map":{"version":3,"sources":["/Users/john/Downloads/library2/lib/src/components/Profile/Friends.js"],"names":["React","Avatar","Card","Button","Form","Fade","firebase","login","useToasts","ToastProvider","db","firestore","userList","Friends","handleSubmit","event","preventDefault","value","state","name","collection","get","then","querySnapshot","empty","console","log","data","docs","map","doc","i","fullname","toLowerCase","push","setState","flag","usersList","books","volumeInfo","user","descriptio","handleChange","bind","target","height","minHeight","item","key","uid","getUID","padding","Component","ToastDemo","content","addToast","appearance","autoDismiss","addFriend","set","username","catch","error"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Avatar from 'react-avatar';\nimport Card from 'react-bootstrap/Card';\nimport Button from 'react-bootstrap/Button';\nimport './Profile.css';\nimport Form from 'react-bootstrap/Form';\nimport Fade from 'react-reveal/Fade';\nimport firebase from '../../firebase';\nimport * as login from '../Auth/Login.js';\nimport { useToasts, ToastProvider } from 'react-toast-notifications'\n\nconst db = firebase.firestore();\nvar userList = [];\n\nexport default class Friends extends React.Component{\n  constructor() {\n    super();\n    this.state = {\n      value: '',\n      flag: 0,\n      books : [],\n      volumeInfo: [],\n      user: false,\n      descriptio: 'first',\n      usersList: []\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({value: event.target.value});\n  }\n\n  handleSubmit = async (event) =>  {\n    event.preventDefault();\n    let value = this.state.value;\n    userList = [];\n    var name = '';\n    db.collection(\"Users\")\n    .get()\n    .then(querySnapshot => {\n      if (querySnapshot.empty) {\n      console.log('No matching documents.');\n      return;\n    }\n   const data = querySnapshot.docs.map(doc => doc.data());\n   console.log(data )\n     for(var i in data){\n   if(value === data[i].name ||  value === data[i].fullname || value === data[i].fullname.toLowerCase() || value === data[i].name.toLowerCase()){\n     userList.push(data[i]);\n     name = data[i].fullname;\n     this.setState({\n       flag: 1,\n       usersList: userList\n     })\n   }\n }\n});\n  }\n\n    render(){\n      if(this.state.flag === 0 ){\n        return(\n             <div style = {{height: '100vh'}} className = 'FriendsPage'>\n             <Fade>\n             <div className = 'friendSearchBar'>\n             <Form inline onSubmit={this.handleSubmit}>\n               <Form.Control\n                 className= \"friendSearch\" size=\"lg\" type=\"text\"\n                 placeholder=\"Search for a friend!\"\n                 value={this.state.value} onChange={this.handleChange}\n                 />\n                 <Button className = \"submitbtn\" variant=\"secondary\" type=\"submit\" size=\"lg\">\n                 Search\n                 </Button>\n               </Form>\n               <br className = 'brdeck'></br>\n               <p>.</p>\n               </div>\n               </Fade>\n             </div>\n        )\n      }else{\n        console.log(userList)\n        return(\n          <div style = {{minHeight: '100vh'}} className = 'FriendsPage'>\n        <div className = 'friendSearchBar'>\n        <Form inline onSubmit={this.handleSubmit}>\n          <Form.Control\n            className= \"friendSearch\" size=\"lg\" type=\"text\"\n            placeholder=\"Search for amnother friend!\"\n            value={this.state.value} onChange={this.handleChange}\n            />\n            <Button className = \"submitbtn\" variant=\"secondary\" type=\"submit\" size=\"lg\">\n            Search\n            </Button>\n          </Form>\n          <br></br>\n          </div>\n          <p>.</p>\n          <ul>\n        {this.state.usersList.map((item, key) => {\n          let uid = db.collection('Users').doc();\n          console.log(login.getUID())\n\n          db.collection(\"Users\").doc(login.getUID()).collection('Library')\n          .get()\n          .then(querySnapshot => {\n              const data = querySnapshot.docs.map(doc => doc.data());\n              console.log(data);\n        }\n      );\n        return(\n          <div>\n           <Avatar className = \"friendAva\" name={item.fullname} round={true}/>\n           <Card className = \"searchFriend\" style = {{padding: '10px'}}>\n           <Card.Title>\n             {item.fullname}\n           </Card.Title>\n           <Card.Subtitle className=\"mb-2 text-muted\">\n             {item.name}\n           </Card.Subtitle>\n           <ToastProvider>\n             <ToastDemo\n             fullname = { item.fullname}\n             name = {item.name}\n             uid = {item.uid}\n             content = \"Friend Added!\"\n             />\n           </ToastProvider>\n           </Card>\n          </div>\n      )})}\n      </ul>\n      </div>\n    );\n    }\n    }\n  }\n\nexport const ToastDemo = ({ content, fullname, name, uid }) => {\n    const { addToast } = useToasts()\n    return (\n      <Button className = \"friendbtn\" onClick={() => {addToast(content, {\n        appearance: 'success',\n        autoDismiss: true,\n      });\n      addFriend(\n        fullname,\n        name,\n        uid\n      );\n    }\n    }>\n        Add Friend\n      </Button>\n    )\n  }\n\nfunction addFriend(fullname, name, uid){\n  console.log(\"friend name \" + name)\n    var addFriend =\n      db.collection('Users').doc(login.getUID())\n      .collection('Friends')\n      .doc(fullname)\n      .set({\n        fullname: fullname,\n        username: name,\n        uid: uid\n      })\n    .then(function() {\n      console.log(\"Friend Added!\");\n    })\n    .catch(function(error) {\n      console.error(\"Error adding friend document: \", error);\n    });\n  }\n"]},"metadata":{},"sourceType":"module"}